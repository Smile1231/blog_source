---
title: 23è®¾è®¡æ¨¡å¼(æ›´æ–°ä¸­)
hide: false
abbrlink: 79c6d028
date: 2021-11-21 17:21:52
tags: è®¾è®¡æ¨¡å¼
categories: è®¾è®¡æ¨¡å¼
keywords: è®¾è®¡æ¨¡å¼
---
# è®¾è®¡æ¨¡å¼æ¨¡å—

> è®¾è®¡æ¨¡å¼çš„ç›®çš„

ç¼–å†™è½¯ä»¶è¿‡ç¨‹ä¸­ï¼Œç¨‹åºå‘˜é¢ä¸´ç€æ¥è‡ª è€¦åˆæ€§ï¼Œå†…èšæ€§ä»¥åŠå¯ç»´æŠ¤æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œé‡ç”¨æ€§ï¼Œçµæ´»æ€§ ç­‰å¤šæ–¹é¢çš„æŒ‘æˆ˜ï¼Œè®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†è®©ç¨‹åº(è½¯ä»¶)ï¼Œå…·æœ‰æ›´å¥½

1. ä»£ç é‡ç”¨æ€§ (å³ï¼šç›¸åŒåŠŸèƒ½çš„ä»£ç ï¼Œä¸ç”¨å¤šæ¬¡ç¼–å†™)
2. å¯è¯»æ€§ (å³ï¼šç¼–ç¨‹è§„èŒƒæ€§,  ä¾¿äºå…¶ä»–ç¨‹åºå‘˜çš„é˜…è¯»å’Œç†è§£)
3. å¯æ‰©å±•æ€§ (å³ï¼šå½“éœ€è¦å¢åŠ æ–°çš„åŠŸèƒ½æ—¶ï¼Œéå¸¸çš„æ–¹ä¾¿ï¼Œç§°ä¸ºå¯ç»´æŠ¤)
4. å¯é æ€§ (å³ï¼šå½“æˆ‘ä»¬å¢åŠ æ–°çš„åŠŸèƒ½åï¼Œå¯¹åŸæ¥çš„åŠŸèƒ½æ²¡æœ‰å½±å“)
5. ä½¿ç¨‹åºå‘ˆç°é«˜å†…èšï¼Œä½è€¦åˆçš„ç‰¹æ€§åˆ†äº«é‡‘å¥ï¼š
6. è®¾è®¡æ¨¡å¼åŒ…å«äº†é¢å‘å¯¹è±¡çš„ç²¾é«“ï¼Œâ€œæ‡‚äº†è®¾è®¡æ¨¡å¼ï¼Œä½ å°±æ‡‚äº†é¢å‘å¯¹è±¡åˆ†æå’Œè®¾è®¡``ï¼ˆOOA/Dï¼‰``çš„ç²¾è¦â€
7. ``Scott Mayers`` åœ¨å…¶å·¨è‘—``ã€ŠEffective C++ã€‹``å°±æ›¾ç»è¯´è¿‡ï¼š``C++``è€æ‰‹å’Œ ``C++``æ–°æ‰‹çš„åŒºåˆ«å°±æ˜¯å‰è€…æ‰‹èƒŒä¸Šæœ‰å¾ˆå¤šä¼¤ç–¤

<!-- more -->

## <text style="color:red">1. ä¸ƒå¤§åŸåˆ™</text>

- 1. å•ä¸€èŒè´£åŸåˆ™
- 2. æ¥å£éš”ç¦»åŸåˆ™
- 3. ä¾èµ–å€’è½¬(å€’ç½®)åŸåˆ™
- 4. é‡Œæ°æ›¿æ¢åŸåˆ™
- 5. å¼€é—­åŸåˆ™
- 6. è¿ªç±³ç‰¹æ³•åˆ™
- 7. åˆæˆå¤ç”¨åŸåˆ™

> å•ä¸€èŒè´£åŸåˆ™

    å¯¹ç±»æ¥è¯´çš„ï¼Œå³ä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚å¦‚ç±» ``A`` è´Ÿè´£ä¸¤ä¸ªä¸åŒèŒè´£ï¼šèŒè´£ ``1``ï¼ŒèŒè´£ ``2``ã€‚å½“èŒè´£ ``1`` éœ€æ±‚å˜æ›´è€Œæ”¹å˜ ``A`` æ—¶ï¼Œå¯èƒ½é€ æˆèŒè´£ ``2`` æ‰§è¡Œé”™è¯¯ï¼Œæ‰€ä»¥éœ€è¦å°†ç±» ``A`` çš„ç²’åº¦åˆ†è§£ä¸º ``A1ï¼ŒA2``

> æ¥å£éš”ç¦»åŸåˆ™

    1. å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ï¼Œå³ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Š
 {% asset_img 2021-11-21-17-25-28.png %}

    3. ç±» ``A`` é€šè¿‡æ¥å£ ``Interface1`` ä¾èµ–ç±» ``B``ï¼Œç±» ``C`` é€šè¿‡æ¥å£ ``Interface1`` ä¾èµ–ç±» ``D``ï¼Œå¦‚æœæ¥å£ ``Interface1`` å¯¹äºç±» ``A`` å’Œç±» ``C``
    æ¥è¯´ä¸æ˜¯æœ€å°æ¥å£ï¼Œé‚£ä¹ˆç±» ``B`` å’Œç±» ``D`` å¿…é¡»å»å®ç°ä»–ä»¬ä¸éœ€è¦çš„æ–¹æ³•ã€‚
	4. æŒ‰éš”ç¦»åŸåˆ™åº”å½“è¿™æ ·å¤„ç†ï¼š
    å°†æ¥å£ ``Interface1`` æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å‡ ä¸ªæ¥å£(è¿™é‡Œæˆ‘ä»¬æ‹†åˆ†æˆ ``3`` ä¸ªæ¥å£)ï¼Œç±» ``A`` å’Œç±» ``C`` åˆ†åˆ«ä¸ä»–ä»¬éœ€è¦çš„æ¥å£å»ºç«‹ä¾èµ–å…³ç³»ã€‚ä¹Ÿå°±æ˜¯é‡‡ç”¨æ¥å£éš”ç¦»åŸåˆ™


> 	ä¾èµ–å€’è½¬åŸåˆ™

ä¾èµ–å€’è½¬åŸåˆ™(``Dependence Inversion Principle``)æ˜¯æŒ‡ï¼š
1. é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡
2. æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡
3. ä¾èµ–å€’è½¬(å€’ç½®)çš„ä¸­å¿ƒæ€æƒ³æ˜¯é¢å‘æ¥å£ç¼–ç¨‹
4. ä¾èµ–å€’è½¬åŸåˆ™æ˜¯åŸºäºè¿™æ ·çš„è®¾è®¡ç†å¿µï¼šç›¸å¯¹äºç»†èŠ‚çš„å¤šå˜æ€§ï¼ŒæŠ½è±¡çš„ä¸œè¥¿è¦ç¨³å®šçš„å¤šã€‚ä»¥æŠ½è±¡ä¸ºåŸºç¡€æ­å»ºçš„æ¶æ„æ¯”ä»¥ç»†èŠ‚ä¸ºåŸºç¡€çš„æ¶æ„è¦ç¨³å®šçš„å¤šã€‚åœ¨ ``java`` ä¸­ï¼ŒæŠ½è±¡æŒ‡çš„æ˜¯æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œç»†èŠ‚å°±æ˜¯å…·ä½“çš„å®ç°ç±»
5. ä½¿ç”¨æ¥å£æˆ–æŠ½è±¡ç±»çš„ç›®çš„æ˜¯åˆ¶å®šå¥½è§„èŒƒï¼Œè€Œä¸æ¶‰åŠä»»ä½•å…·ä½“çš„æ“ä½œï¼ŒæŠŠå±•ç°ç»†èŠ‚çš„ä»»åŠ¡äº¤ç»™ä»–ä»¬çš„å®ç°ç±»å»å®Œæˆ

> é‡Œæ°æ›¿æ¢åŸåˆ™

**ç»§æ‰¿æ€§çš„æ€è€ƒå’Œè¯´æ˜**
1)	ç»§æ‰¿åŒ…å«è¿™æ ·ä¸€å±‚å«ä¹‰ï¼šçˆ¶ç±»ä¸­å‡¡æ˜¯å·²ç»å®ç°å¥½çš„æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯åœ¨è®¾å®šè§„èŒƒå’Œå¥‘çº¦ï¼Œè™½ç„¶å®ƒä¸å¼ºåˆ¶è¦æ±‚æ‰€æœ‰çš„å­ç±»å¿…é¡»éµå¾ªè¿™äº›å¥‘çº¦ï¼Œä½†æ˜¯å¦‚æœå­ç±»å¯¹è¿™äº›å·²ç»å®ç°çš„æ–¹æ³•ä»»æ„ä¿®æ”¹ï¼Œå°±ä¼šå¯¹æ•´ä¸ªç»§æ‰¿ä½“ç³»é€ æˆç ´åã€‚
2)	ç»§æ‰¿åœ¨ç»™ç¨‹åºè®¾è®¡å¸¦æ¥ä¾¿åˆ©çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†å¼Šç«¯ã€‚æ¯”å¦‚ä½¿ç”¨ç»§æ‰¿ä¼šç»™ç¨‹åºå¸¦æ¥ä¾µå…¥æ€§ï¼Œç¨‹åºçš„å¯ç§»æ¤æ€§é™ä½ï¼Œ å¢åŠ å¯¹è±¡é—´çš„è€¦åˆæ€§ï¼Œå¦‚æœä¸€ä¸ªç±»è¢«å…¶ä»–çš„ç±»æ‰€ç»§æ‰¿ï¼Œåˆ™å½“è¿™ä¸ªç±»éœ€è¦ä¿®æ”¹æ—¶ï¼Œå¿…é¡»è€ƒè™‘åˆ°æ‰€æœ‰çš„å­ç±»ï¼Œå¹¶ä¸”çˆ¶ç±»ä¿®æ”¹åï¼Œæ‰€æœ‰æ¶‰åŠåˆ°å­ç±»çš„åŠŸèƒ½éƒ½æœ‰å¯èƒ½äº§ç”Ÿæ•…éšœ
3)	é—®é¢˜æå‡ºï¼šåœ¨ç¼–ç¨‹ä¸­ï¼Œå¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨ç»§æ‰¿? => é‡Œæ°æ›¿æ¢åŸåˆ™

**åŸºæœ¬ä»‹ç»**
1)	é‡Œæ°æ›¿æ¢åŸåˆ™(``Liskov Substitution Principle``)åœ¨ ``1988`` å¹´ï¼Œç”±éº»çœç†å·¥å­¦é™¢çš„ä»¥ä¸ºå§“é‡Œçš„å¥³å£«æå‡ºçš„ã€‚
2)	å¦‚æœå¯¹æ¯ä¸ªç±»å‹ä¸º ``T1`` çš„å¯¹è±¡ ``o1``ï¼Œéƒ½æœ‰ç±»å‹ä¸º ``T2`` çš„å¯¹è±¡ ``o2``ï¼Œä½¿å¾—ä»¥ ``T1`` å®šä¹‰çš„æ‰€æœ‰ç¨‹åº ``P`` åœ¨æ‰€æœ‰çš„å¯¹è±¡ ``o1`` éƒ½ä»£æ¢æˆ ``o2`` æ—¶ï¼Œç¨‹åº ``P`` çš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»å‹``T2`` æ˜¯ç±»å‹ ``T1`` çš„å­ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚
3)	åœ¨ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œéµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œåœ¨å­ç±»ä¸­å°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•
4)	é‡Œæ°æ›¿æ¢åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼Œç»§æ‰¿å®é™…ä¸Šè®©ä¸¤ä¸ªç±»è€¦åˆæ€§å¢å¼ºäº†ï¼Œåœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡èšåˆï¼Œç»„åˆï¼Œä¾èµ– æ¥è§£å†³é—®é¢˜ã€‚

> å¼€é—­åŸåˆ™

1)	å¼€é—­åŸåˆ™ï¼ˆ``Open Closed Principle``ï¼‰æ˜¯ç¼–ç¨‹ä¸­æœ€åŸºç¡€ã€æœ€é‡è¦çš„è®¾è®¡åŸåˆ™
2)	ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ï¼Œæ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹**æ‰©å±•å¼€æ”¾(å¯¹æä¾›æ–¹)**ï¼Œå¯¹**ä¿®æ”¹å…³é—­(å¯¹ä½¿ç”¨æ–¹)**ã€‚ç”¨æŠ½è±¡æ„å»ºæ¡†æ¶ï¼Œç”¨å®ç°æ‰©å±•ç»†èŠ‚ã€‚
3)	å½“è½¯ä»¶éœ€è¦å˜åŒ–æ—¶ï¼Œå°½é‡é€šè¿‡æ‰©å±•è½¯ä»¶å®ä½“çš„è¡Œä¸ºæ¥å®ç°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®ç°å˜åŒ–ã€‚
4)	ç¼–ç¨‹ä¸­éµå¾ªå…¶å®ƒåŸåˆ™ï¼Œä»¥åŠä½¿ç”¨è®¾è®¡æ¨¡å¼çš„ç›®çš„å°±æ˜¯éµå¾ªå¼€é—­åŸåˆ™ã€‚

> è¿ªç±³ç‰¹æ³•åˆ™

1)	ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£
2)	ç±»ä¸ç±»å…³ç³»è¶Šå¯†åˆ‡ï¼Œè€¦åˆåº¦è¶Šå¤§
3)	è¿ªç±³ç‰¹æ³•åˆ™(``Demeter Principle``)åˆå«æœ€å°‘çŸ¥é“åŸåˆ™ï¼Œå³ä¸€ä¸ªç±»å¯¹è‡ªå·±ä¾èµ–çš„ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºè¢«ä¾èµ–çš„ç±»ä¸ç®¡å¤šä¹ˆå¤æ‚ï¼Œéƒ½å°½é‡å°†é€»è¾‘å°è£…åœ¨ç±»çš„å†…éƒ¨ã€‚å¯¹å¤–é™¤äº†æä¾›çš„ ``public`` æ–¹æ³•ï¼Œä¸å¯¹å¤–æ³„éœ²ä»»ä½•ä¿¡æ¯
4)	è¿ªç±³ç‰¹æ³•åˆ™è¿˜æœ‰ä¸ªæ›´ç®€å•çš„å®šä¹‰ï¼šåªä¸ç›´æ¥çš„æœ‹å‹é€šä¿¡
5)	ç›´æ¥çš„æœ‹å‹ï¼šæ¯ä¸ªå¯¹è±¡éƒ½ä¼šä¸å…¶ä»–å¯¹è±¡æœ‰è€¦åˆå…³ç³»ï¼Œåªè¦ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æœ‰è€¦åˆå…³ç³»ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æ˜¯æœ‹å‹å…³ç³»ã€‚è€¦åˆçš„æ–¹å¼å¾ˆå¤šï¼Œä¾èµ–ï¼Œå…³è”ï¼Œç»„åˆï¼Œèšåˆç­‰ã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬ç§°å‡ºç°æˆå‘˜å˜é‡ï¼Œæ–¹æ³•å‚æ•°ï¼Œæ–¹æ³•è¿”å›å€¼ä¸­çš„ç±»ä¸ºç›´æ¥çš„æœ‹å‹ï¼Œè€Œå‡ºç°åœ¨å±€éƒ¨å˜é‡ä¸­çš„ç±»ä¸æ˜¯ç›´æ¥çš„æœ‹å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé™Œç”Ÿçš„ç±»æœ€å¥½ä¸è¦ä»¥å±€éƒ¨å˜é‡çš„å½¢å¼å‡ºç°åœ¨ç±»çš„å†…éƒ¨ã€‚

> åˆæˆå¤ç”¨åŸåˆ™``ï¼ˆComposite Reuse Principleï¼‰``

    åŸåˆ™æ˜¯å°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿

{% asset_img 2021-11-21-17-29-13.png %}

> è®¾è®¡åŸåˆ™æ ¸å¿ƒæ€æƒ³
1. æ‰¾å‡ºåº”ç”¨ä¸­å¯èƒ½éœ€è¦å˜åŒ–ä¹‹å¤„ï¼ŒæŠŠå®ƒä»¬ç‹¬ç«‹å‡ºæ¥ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦å˜åŒ–çš„ä»£ç æ··åœ¨ä¸€èµ·ã€‚
2. é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å®ç°ç¼–ç¨‹ã€‚
3. ä¸ºäº†äº¤äº’å¯¹è±¡ä¹‹é—´çš„æ¾è€¦åˆè®¾è®¡è€ŒåŠªåŠ›

> ``UML``å›¾ç¤º

{% asset_img 2021-11-21-17-30-08.png %}

# <text style="color:yellow">è®¾è®¡æ¨¡å¼</text>

## 1. <text style="color:#03a5fc">å•ä¾‹æ¨¡å¼</text>

### 1.1 å•ä¾‹è®¾è®¡æ¨¡å¼ä»‹ç»

æ‰€è°“ç±»çš„å•ä¾‹è®¾è®¡æ¨¡å¼ï¼Œå°±æ˜¯é‡‡å–ä¸€å®šçš„æ–¹æ³•ä¿è¯åœ¨æ•´ä¸ªçš„è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå¯¹æŸä¸ªç±»åªèƒ½å­˜åœ¨ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œ å¹¶ä¸”è¯¥ç±»åªæä¾›ä¸€ä¸ªå–å¾—å…¶å¯¹è±¡å®ä¾‹çš„æ–¹æ³•(é™æ€æ–¹æ³•)ã€‚

æ¯”å¦‚ ``Hibernate`` çš„ ``SessionFactory``ï¼Œå®ƒå……å½“æ•°æ®å­˜å‚¨æºçš„ä»£ç†ï¼Œå¹¶è´Ÿè´£åˆ›å»º ``Session`` å¯¹è±¡ã€‚``SessionFactory`` å¹¶ä¸æ˜¯è½»é‡çº§çš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªé¡¹ç›®é€šå¸¸åªéœ€è¦ä¸€ä¸ª ``SessionFactory`` å°±å¤Ÿï¼Œè¿™æ˜¯å°±ä¼šä½¿ç”¨åˆ°å•ä¾‹æ¨¡å¼ã€‚

### 1.2 å•ä¾‹è®¾è®¡æ¨¡å¼``å…«``ç§æ–¹å¼
å•ä¾‹æ¨¡å¼æœ‰``å…«``ç§æ–¹å¼ï¼š

1)	é¥¿æ±‰å¼(é™æ€å¸¸é‡)---å…ˆåˆ›å»ºå¥½äº†
2)	é¥¿æ±‰å¼ï¼ˆé™æ€ä»£ç å—ï¼‰
3)	æ‡’æ±‰å¼(çº¿ç¨‹ä¸å®‰å…¨)
4)	æ‡’æ±‰å¼(çº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥æ–¹æ³•)
5)	æ‡’æ±‰å¼(çº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥ä»£ç å—)
6)	åŒé‡æ£€æŸ¥
7)	é™æ€å†…éƒ¨ç±»
8)	æšä¸¾

### 1.2.1 é¥¿æ±‰å¼ï¼ˆé™æ€å¸¸é‡ï¼‰

é¥¿æ±‰å¼ï¼ˆé™æ€å¸¸é‡ï¼‰åº”ç”¨å®ä¾‹æ­¥éª¤å¦‚ä¸‹ï¼š
1)	æ„é€ å™¨ç§æœ‰åŒ– (é˜²æ­¢ ``new`` )
2)	ç±»çš„å†…éƒ¨åˆ›å»ºå¯¹è±¡
3)	å‘å¤–æš´éœ²ä¸€ä¸ªé™æ€çš„å…¬å…±æ–¹æ³•ã€‚``getInstance``
4)	ä»£ç å®ç°
```java
public class SingletonTest01 {
    public static void main(String[] args) {
        //æµ‹è¯•
        Singleton instance = Singleton.getInstance();
        Singleton instance2 = Singleton.getInstance();
        System.out.println(instance == instance2); // true
        System.out.println("instance.hashCode=" + instance.hashCode());//instance.hashCode=13648335
        System.out.println("instance2.hashCode=" + instance2.hashCode());//instance2.hashCode=13648335

    }
}

/**
 * é¥¿æ±‰å¼ï¼ˆé™æ€å˜é‡ï¼‰
 */
class Singleton {

    //1.æ„é€ å™¨ç§æœ‰åŒ–, å¤–éƒ¨ä¸èƒ½new
    private Singleton() {

    }

    //2.æœ¬ç±»å†…éƒ¨åˆ›å»ºå®ä¾‹
    private final static Singleton instance = new Singleton();

    //3. æä¾›ä¸€ä¸ªå…¬æœ‰çš„é™æ€æ–¹æ³•ï¼Œè¿”å›å®ä¾‹å¯¹è±¡

    public static Singleton getInstance() {
        return instance;
    }

}
```

> ïƒ˜	ä¼˜ç¼ºç‚¹è¯´æ˜ï¼š
1)	ä¼˜ç‚¹ï¼šè¿™ç§å†™æ³•æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åœ¨ç±»è£…è½½çš„æ—¶å€™å°±å®Œæˆå®ä¾‹åŒ–ã€‚é¿å…äº†çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚
2)	ç¼ºç‚¹ï¼šåœ¨ç±»è£…è½½çš„æ—¶å€™å°±å®Œæˆå®ä¾‹åŒ–ï¼Œæ²¡æœ‰è¾¾åˆ° ``Lazy Loading`` çš„æ•ˆæœã€‚å¦‚æœä»å§‹è‡³ç»ˆä»æœªä½¿ç”¨è¿‡è¿™ä¸ªå®ä¾‹ï¼Œåˆ™ä¼šé€ æˆå†…å­˜çš„æµªè´¹

3)	è¿™ç§æ–¹å¼åŸºäº ``classloder`` æœºåˆ¶é¿å…äº†å¤šçº¿ç¨‹çš„åŒæ­¥é—®é¢˜ï¼Œä¸è¿‡ï¼Œ``instance`` åœ¨ç±»è£…è½½æ—¶å°±å®ä¾‹åŒ–ï¼Œåœ¨å•ä¾‹æ¨¡å¼ä¸­å¤§å¤šæ•°éƒ½æ˜¯è°ƒç”¨ ``getInstance`` æ–¹æ³•ï¼Œ ä½†æ˜¯å¯¼è‡´ç±»è£…è½½çš„åŸå› æœ‰å¾ˆå¤šç§ï¼Œå› æ­¤ä¸èƒ½ç¡®å®šæœ‰å…¶ä»–çš„æ–¹å¼ï¼ˆæˆ–è€…å…¶ä»–çš„é™æ€æ–¹æ³•ï¼‰å¯¼è‡´ç±»è£…è½½ï¼Œè¿™æ—¶å€™åˆå§‹åŒ– ``instance`` å°±æ²¡æœ‰è¾¾åˆ° ``lazy loading`` çš„æ•ˆæœ

4)	ç»“è®ºï¼šè¿™ç§å•ä¾‹æ¨¡å¼å¯ç”¨ï¼Œå¯èƒ½é€ æˆå†…å­˜æµªè´¹

### 1.2.2 é¥¿æ±‰å¼ï¼ˆé™æ€ä»£ç å—ï¼‰

ä»£ç æ¼”ç¤ºï¼š

```java
/**
 * é¥¿æ±‰å¼ï¼ˆé™æ€ä»£ç å—ï¼‰
 */
class Singleton {

    //1.æ„é€ å™¨ç§æœ‰åŒ–, å¤–éƒ¨ä¸èƒ½new
    private Singleton() {

    }

    //2.æœ¬ç±»å†…éƒ¨åˆ›å»ºå®ä¾‹
    private static Singleton instance;

    // åœ¨é™æ€ä»£ç å—ä¸­ï¼Œåˆ›å»ºå•ä¾‹å¯¹è±¡
    static {
        instance = new Singleton();
    }

    //3. æä¾›ä¸€ä¸ªå…¬æœ‰çš„é™æ€æ–¹æ³•ï¼Œè¿”å›å®ä¾‹å¯¹è±¡

    public static Singleton getInstance() {
        return instance;
    }

}
```

> ïƒ˜	ä¼˜ç¼ºç‚¹è¯´æ˜ï¼š
1)	è¿™ç§æ–¹å¼å’Œä¸Šé¢çš„æ–¹å¼å…¶å®ç±»ä¼¼ï¼Œåªä¸è¿‡å°†ç±»å®ä¾‹åŒ–çš„è¿‡ç¨‹æ”¾åœ¨äº†é™æ€ä»£ç å—ä¸­ï¼Œä¹Ÿæ˜¯åœ¨ç±»è£…è½½çš„æ—¶å€™ï¼Œå°±æ‰§è¡Œé™æ€ä»£ç å—ä¸­çš„ä»£ç ï¼Œåˆå§‹åŒ–ç±»çš„å®ä¾‹ã€‚ä¼˜ç¼ºç‚¹å’Œä¸Šé¢æ˜¯ä¸€æ ·çš„ã€‚
2)	ç»“è®ºï¼šè¿™ç§å•ä¾‹æ¨¡å¼å¯ç”¨ï¼Œä½†æ˜¯å¯èƒ½é€ æˆå†…å­˜æµªè´¹

<hr/>

### 1.2.3 æ‡’æ±‰å¼(çº¿ç¨‹ä¸å®‰å…¨)

ä»£ç æ¼”ç¤º
```java
class SingleTon {

    //1.åˆ›å»ºå®ä¾‹
    private static SingleTon instance;

    //2.æ„é€ å™¨ç§æœ‰åŒ–, å¤–éƒ¨ä¸èƒ½new
    private SingleTon() {
    }

    //æä¾›ä¸€ä¸ªé™æ€çš„å…¬æœ‰æ–¹æ³•ï¼Œå½“ä½¿ç”¨åˆ°è¯¥æ–¹æ³•æ—¶ï¼Œæ‰å»åˆ›å»º instance
    //å³æ‡’æ±‰å¼
    public static SingleTon getInstance(){
        if(instance == null){
            instance = new SingleTon();
        }
        return instance;
    }

}
```

> ïƒ˜	ä¼˜ç¼ºç‚¹è¯´æ˜ï¼š

1)	èµ·åˆ°äº† ``Lazy Loading`` çš„æ•ˆæœï¼Œä½†æ˜¯åªèƒ½åœ¨å•çº¿ç¨‹ä¸‹ä½¿ç”¨ã€‚
2)	å¦‚æœåœ¨å¤šçº¿ç¨‹ä¸‹ï¼Œä¸€ä¸ªçº¿ç¨‹è¿›å…¥äº† ``if (singleton == null)``åˆ¤æ–­è¯­å¥å—ï¼Œè¿˜æœªæ¥å¾—åŠå¾€ä¸‹æ‰§è¡Œï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¹Ÿé€šè¿‡äº†è¿™ä¸ªåˆ¤æ–­è¯­å¥ï¼Œè¿™æ—¶ä¾¿ä¼šäº§ç”Ÿå¤šä¸ªå®ä¾‹ã€‚æ‰€ä»¥åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¸å¯ä½¿ç”¨è¿™ç§æ–¹å¼
3)	ç»“è®ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸è¦ä½¿ç”¨è¿™ç§æ–¹å¼.

### 1.2.4 æ‡’æ±‰å¼(çº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥æ–¹æ³•)

ä»£ç æ¼”ç¤º

```java
class SingleTon {

    //1.åˆ›å»ºå®ä¾‹
    private static SingleTon instance;

    //2..æ„é€ å™¨ç§æœ‰åŒ–, å¤–éƒ¨ä¸èƒ½new
    private SingleTon() {
    }

    //æä¾›ä¸€ä¸ªé™æ€çš„å…¬æœ‰æ–¹æ³•ï¼ŒåŠ å…¥åŒæ­¥å¤„ç†çš„ä»£ç ï¼Œè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜
    //å³æ‡’æ±‰å¼
    public static synchronized SingleTon getInstance(){
        if(instance == null){
            instance = new SingleTon();
        }
        return instance;
    }

}
```

> ïƒ˜	ä¼˜ç¼ºç‚¹è¯´æ˜ï¼š

1)	è§£å†³äº†çº¿ç¨‹å®‰å…¨é—®é¢˜
2)	æ•ˆç‡å¤ªä½äº†ï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨æƒ³è·å¾—ç±»çš„å®ä¾‹æ—¶å€™ï¼Œæ‰§è¡Œ ``getInstance()``æ–¹æ³•éƒ½è¦è¿›è¡ŒåŒæ­¥ã€‚è€Œå…¶å®è¿™ä¸ªæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡å®ä¾‹åŒ–ä»£ç å°±å¤Ÿäº†ï¼Œåé¢çš„æƒ³è·å¾—è¯¥ç±»å®ä¾‹ï¼Œç›´æ¥ ``return`` å°±è¡Œäº†ã€‚æ–¹æ³•è¿›è¡ŒåŒæ­¥æ•ˆç‡å¤ªä½
3)	ç»“è®ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼

### 1.2.5 æ‡’æ±‰å¼(çº¿ç¨‹å®‰å…¨ï¼ŒåŒæ­¥ä»£ç å—)

ä»£ç æ¼”ç¤º
```java
class SingleTon {

    //1.åˆ›å»ºå®ä¾‹
    private static SingleTon instance;

    //2..æ„é€ å™¨ç§æœ‰åŒ–, å¤–éƒ¨ä¸èƒ½new
    private SingleTon() {
    }

    //æä¾›ä¸€ä¸ªé™æ€çš„å…¬æœ‰æ–¹æ³•ï¼ŒåŠ å…¥äº†åŒæ­¥ä»£ç å—ï¼Œè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜
    //å³æ‡’æ±‰å¼
    public static  SingleTon getInstance(){
        if(instance == null){
            synchronized (SingleTon.class){
                instance = new SingleTon();
            }
        }
        return instance;
    }

}
```
**ä¸æ¨èä½¿ç”¨åŒæ­¥ä»£ç å—**
<hr/>

### 1.2.6 åŒé‡æ£€æŸ¥--ä½¿ç”¨äº†``volatile``å…³é”®å­—

```java
class SingleTon {

    //1.åˆ›å»ºå®ä¾‹,ä½¿ç”¨volatileå…³é”®å­—
    private static volatile SingleTon instance;

    //2..æ„é€ å™¨ç§æœ‰åŒ–, å¤–éƒ¨ä¸èƒ½new
    private SingleTon() {
    }

    //æä¾›ä¸€ä¸ªé™æ€çš„å…¬æœ‰æ–¹æ³•ï¼ŒåŠ å…¥åŒé‡æ£€æŸ¥ä»£ç ï¼Œè§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜, åŒæ—¶è§£å†³æ‡’åŠ è½½é—®é¢˜
    //åŒæ—¶ä¿è¯äº†æ•ˆç‡, æ¨èä½¿ç”¨
    public static synchronized SingleTon getInstance(){
        if(instance == null){
            synchronized (SingleTon.class){
                if(instance == null){
                    instance = new SingleTon();
                }
            }
        }
        return instance;
    }

}
```
> ïƒ˜	ä¼˜ç¼ºç‚¹è¯´æ˜ï¼š


1)	``Double-Check`` æ¦‚å¿µæ˜¯å¤šçº¿ç¨‹å¼€å‘ä¸­å¸¸ä½¿ç”¨åˆ°çš„ï¼Œå¦‚ä»£ç ä¸­æ‰€ç¤ºï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä¸¤æ¬¡ ``if (singleton == null)``æ£€æŸ¥ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨äº†ã€‚
2)	è¿™æ ·ï¼Œå®ä¾‹åŒ–ä»£ç åªç”¨æ‰§è¡Œä¸€æ¬¡ï¼Œåé¢å†æ¬¡è®¿é—®æ—¶ï¼Œåˆ¤æ–­ ``if (singleton == null)``ï¼Œç›´æ¥ ``return`` å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¹Ÿé¿å…çš„åå¤è¿›è¡Œæ–¹æ³•åŒæ­¥.
3)	çº¿ç¨‹å®‰å…¨ï¼›å»¶è¿ŸåŠ è½½ï¼›æ•ˆç‡è¾ƒé«˜
4)	ç»“è®ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œæ¨èä½¿ç”¨è¿™ç§å•ä¾‹è®¾è®¡æ¨¡å¼

### 1.2.7 é™æ€å†…éƒ¨ç±»

ä»£ç æ¼”ç¤º

```java
class SingleTon {

    //1.æ„é€ å™¨ç§æœ‰åŒ–, å¤–éƒ¨ä¸èƒ½new
    private SingleTon() {
    }
    //2.å†™ä¸€ä¸ªé™æ€å†…éƒ¨ç±»,è¯¥ç±»ä¸­æœ‰ä¸€ä¸ªé™æ€å±æ€§ Singleton 
    private static class  SingletonInstance{
        private static final SingleTon INSTANCE = new SingleTon();
    }

    //3.æä¾›ä¸€ä¸ªé™æ€çš„å…¬æœ‰æ–¹æ³•ï¼Œç›´æ¥è¿”å› SingletonInstance.INSTANCE
    public static synchronized SingleTon getInstance(){
        return SingletonInstance.INSTANCE;
    }

}
```

> ïƒ˜	ä¼˜ç¼ºç‚¹è¯´æ˜ï¼š

1)	è¿™ç§æ–¹å¼é‡‡ç”¨äº†ç±»è£…è½½çš„æœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ–å®ä¾‹æ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚
2)	é™æ€å†…éƒ¨ç±»æ–¹å¼åœ¨ ``Singleton`` ç±»è¢«è£…è½½æ—¶å¹¶ä¸ä¼šç«‹å³å®ä¾‹åŒ–ï¼Œè€Œæ˜¯åœ¨éœ€è¦å®ä¾‹åŒ–æ—¶ï¼Œè°ƒç”¨ ``getInstance`` æ–¹æ³•ï¼Œæ‰ä¼šè£…è½½ ``SingletonInstance`` ç±»ï¼Œä»è€Œå®Œæˆ ``Singleton`` çš„å®ä¾‹åŒ–ã€‚
3)	ç±»çš„é™æ€å±æ€§åªä¼šåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ç±»çš„æ—¶å€™åˆå§‹åŒ–ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œï¼Œ``JVM`` å¸®åŠ©æˆ‘ä»¬ä¿è¯äº†çº¿ç¨‹çš„å®‰å…¨æ€§ï¼Œåœ¨ç±»è¿›è¡Œåˆå§‹åŒ–æ—¶ï¼Œåˆ«çš„çº¿ç¨‹æ˜¯æ— æ³•è¿›å…¥çš„ã€‚
4)	ä¼˜ç‚¹ï¼šé¿å…äº†çº¿ç¨‹ä¸å®‰å…¨ï¼Œåˆ©ç”¨é™æ€å†…éƒ¨ç±»ç‰¹ç‚¹å®ç°å»¶è¿ŸåŠ è½½ï¼Œæ•ˆç‡é«˜
5)	ç»“è®ºï¼šæ¨èä½¿ç”¨.

### 1.2.8 æšä¸¾

ä»£ç æ¼”ç¤º
```java
public class SingletonTest08 {
    public static void main(String[] args) {
        Singleton instance1 = Singleton.INSTANCE;
        Singleton instance2 = Singleton.INSTANCE;

        System.out.println(instance1 == instance2);//true

        System.out.println(instance1.hashCode());//13648335
        System.out.println(instance2.hashCode());//13648335

        instance1.sayOK();//OK~

    }
}
//ä½¿ç”¨æšä¸¾ï¼Œå¯ä»¥å®ç°å•ä¾‹, æ¨è
enum Singleton{
    //å±æ€§
    INSTANCE;
    public void sayOK(){
        System.out.println("OKï½");
    }
}
```
> ïƒ˜	ä¼˜ç¼ºç‚¹è¯´æ˜ï¼š

1)	è¿™å€ŸåŠ© ``JDK1.5`` ä¸­æ·»åŠ çš„æšä¸¾æ¥å®ç°å•ä¾‹æ¨¡å¼ã€‚ä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚
2)	è¿™ç§æ–¹å¼æ˜¯ ``Effective Java`` ä½œè€… ``Josh Bloch``  æå€¡çš„æ–¹å¼
3)	ç»“è®ºï¼šæ¨èä½¿ç”¨

### 1.2.9 å•ä¾‹æ¨¡å¼åœ¨ ``JDK``  åº”ç”¨çš„æºç åˆ†æ

> å•ä¾‹æ¨¡å¼åœ¨``JDK`` åº”ç”¨çš„æºç åˆ†æ

1)	æˆ‘ä»¬ ``JDK`` ä¸­ï¼Œ``java.lang.Runtime`` å°±æ˜¯ç»å…¸çš„å•ä¾‹æ¨¡å¼(é¥¿æ±‰å¼)
2)	ä»£ç åˆ†æ+``Debug`` æºç +ä»£ç è¯´æ˜

{% asset_img 2021-11-21-17-44-42.png %}
### 1.2.10 å•ä¾‹æ¨¡å¼æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜

1)	å•ä¾‹æ¨¡å¼ä¿è¯äº†ç³»ç»Ÿå†…å­˜ä¸­è¯¥ç±»åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼ŒèŠ‚çœäº†ç³»ç»Ÿèµ„æºï¼Œå¯¹äºä¸€äº›éœ€è¦é¢‘ç¹åˆ›å»ºé”€æ¯çš„å¯¹è±¡ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼å¯ä»¥æé«˜ç³»ç»Ÿæ€§èƒ½
2)	å½“æƒ³å®ä¾‹åŒ–ä¸€ä¸ªå•ä¾‹ç±»çš„æ—¶å€™ï¼Œå¿…é¡»è¦è®°ä½ä½¿ç”¨ç›¸åº”çš„è·å–å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ ``new``
3)	å•ä¾‹æ¨¡å¼ä½¿ç”¨çš„åœºæ™¯ï¼šéœ€è¦**é¢‘ç¹**çš„è¿›è¡Œåˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡ã€åˆ›å»ºå¯¹è±¡æ—¶è€—æ—¶è¿‡å¤šæˆ–è€—è´¹èµ„æºè¿‡å¤š(å³ï¼š**é‡é‡çº§å¯¹è±¡**)ï¼Œä½†åˆç»å¸¸ç”¨åˆ°çš„å¯¹è±¡ã€**å·¥å…·ç±»å¯¹è±¡**ã€é¢‘ç¹è®¿é—®æ•°æ®åº“æˆ–æ–‡ä»¶çš„å¯¹è±¡(æ¯”å¦‚**æ•°æ®æºã€session å·¥å‚**ç­‰)


<HR style="border:3 double #987cb9" width="100%" color=#84fa2a SIZE=3>



## 2 <text style="color:#fc0356">å·¥å‚æ¨¡å¼</text>

### 2.1 ç®€å•å·¥å‚æ¨¡å¼

> çœ‹ä¸€ä¸ªå…·ä½“çš„éœ€æ±‚

çœ‹ä¸€ä¸ªæŠ«è¨çš„é¡¹ç›®ï¼šè¦ä¾¿äºæŠ«è¨ç§ç±»çš„æ‰©å±•ï¼Œè¦ä¾¿äºç»´æŠ¤
1)	æŠ«è¨çš„ç§ç±»å¾ˆå¤š(æ¯”å¦‚ ``GreekPizz``ã€``CheesePizz`` ç­‰)
2)	æŠ«è¨çš„åˆ¶ä½œæœ‰ ``prepare``ï¼Œ``bake``, ``cut``, ``box``
3)	å®ŒæˆæŠ«è¨åº—è®¢è´­åŠŸèƒ½ã€‚

#### <text style="color:#03fca5">2.1.1. ä¼ ç»Ÿæ–¹å¼</text>

1)	æ€è·¯åˆ†æ(ç±»å›¾)

{% asset_img 2021-11-21-17-31-01.png %}

ç¼–å†™ ``OrderPizza.java`` å»è®¢è´­éœ€è¦çš„å„ç§ ``Pizza``

é¡¹ç›®ç»“æ„ï¼š

{% asset_img 2021-11-21-17-33-57.png %}

ä»£ç æ¼”ç¤ºï¼š

```java
//Pizza.java
public abstract class Pizza {
    protected String name;//åå­—

    //å‡†å¤‡åŸææ–™ï¼Œå› ä¸ºä¸åŒçš„æŠ«è¨ä¸ä¸€æ ·ï¼Œå› æ­¤è¿™è¾¹åšæˆæŠ½è±¡æ–¹æ³•
    public abstract void prepare();

    public void bake(){
        System.out.println(name+ " backing");
    }

    public void cut(){
        System.out.println(name+ " cutting");
    }

    public void box(){
        System.out.println(name+ " boxing");
    }

    public void setName(String name){
        this.name = name;
    }

}
/***********************************************************/
//CheesePizza.java
public class CheesePizza extends Pizza{
    @Override
    public void prepare() {
        System.out.println("ç»™åˆ¶ä½œå¥¶é…ªæŠ«è¨å‡†å¤‡åŸææ–™....");
    }
}
/***********************************************************/
//GreekPizza.java
public class GreekPizza extends Pizza{

    @Override
    public void prepare() {
        System.out.println("ç»™å¸Œè…ŠæŠ«è¨åˆ¶ä½œå‡†å¤‡åŸææ–™....");
    }
}
/***********************************************************/
//OrderPizza.java
public class OrderPizza {
    
    //æ„é€ å™¨
    public OrderPizza() {
        Pizza pizza = null;
        String orderType; //è®¢è´­çš„æŠ«è¨ç±»å‹

        do {
            //IntelliJ IDEA 2018.2çš„æ–°ç‰¹æ€§ï¼šå¯¹äºä¸€äº›è¢«é‡æ–°åˆ†é…åœ°å€çš„å˜é‡æˆ–è€…å‚æ•°ï¼ŒIDEAé»˜è®¤ç»™å®ƒä»¬åŠ ä¸Šä¸‹åˆ’çº¿
            orderType = GetType.getType();
            if (orderType.equals("greek")) {
                pizza = new GreekPizza();
                pizza.setName("å¸Œè…ŠæŠ«è¨");
            } else if (orderType.equals("cheese")) {
                pizza = new CheesePizza();
                pizza.setName(" å¥¶é…ªæŠ«è¨ ");
            } else {
                break;
            }
           //è¾“å‡º pizza åˆ¶ä½œè¿‡ç¨‹
            pizza.prepare();
            pizza.bake();
            pizza.cut();
            pizza.box();
        } while (true);
    }
}
/***********************************************************/
//GetType.java
public class GetType {

    public static String getType(){
        try {
            BufferedReader strIn = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("input pizza type: ");
            String str = strIn.readLine();
            return str;
        } catch (Exception e) {
            e.printStackTrace();
            return "";
        }
    }
}
/***********************************************************/
//PizzaStore.java  ---ä¸»æ–¹æ³•ç±»
public class PizzaStore {
    public static void main(String[] args) {
       new OrderPizza();
    }
}
```
> ä¼ ç»Ÿçš„æ–¹å¼çš„ä¼˜ç¼ºç‚¹

1)	ä¼˜ç‚¹æ˜¯æ¯”è¾ƒå¥½ç†è§£ï¼Œç®€å•æ˜“æ“ä½œã€‚
2)	ç¼ºç‚¹æ˜¯è¿åäº†è®¾è®¡æ¨¡å¼çš„ ``ocp`` åŸåˆ™ï¼Œå³å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å³å½“æˆ‘ä»¬ç»™ç±»å¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œå°½é‡ä¸ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…å°½å¯èƒ½å°‘ä¿®æ”¹ä»£ç .
3)	æ¯”å¦‚æˆ‘ä»¬è¿™æ—¶è¦æ–°å¢åŠ ä¸€ä¸ª ``Pizza`` çš„ç§ç±»(``Pepper`` æŠ«è¨)ï¼Œæˆ‘ä»¬éœ€è¦åšå¦‚ä¸‹ä¿®æ”¹. å¦‚æœæˆ‘ä»¬å¢åŠ ä¸€ä¸ª ``Pizza`` ç±»ï¼Œåªè¦æ˜¯è®¢è´­ ``Pizza`` çš„ä»£ç éƒ½éœ€è¦ä¿®æ”¹.


{% asset_img 2021-11-21-17-34-31.png %}

{% asset_img 2021-11-21-17-34-44.png %}

4)	æ”¹è¿›çš„æ€è·¯åˆ†æ
> åˆ†æï¼šä¿®æ”¹ä»£ç å¯ä»¥æ¥å—ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨å…¶å®ƒçš„åœ°æ–¹ä¹Ÿæœ‰åˆ›å»º ``Pizza`` çš„ä»£ç ï¼Œå°±æ„å‘³ç€ï¼Œä¹Ÿéœ€è¦ä¿®æ”¹ï¼Œè€Œåˆ›å»º ``Pizza``çš„ä»£ç ï¼Œå¾€å¾€æœ‰å¤šå¤„ã€‚
> 
æ€è·¯ï¼šæŠŠåˆ›å»º ``Pizza`` å¯¹è±¡å°è£…åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬æœ‰æ–°çš„ ``Pizza`` ç§ç±»æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹è¯¥ç±»å°±å¯ï¼Œå…¶å®ƒæœ‰åˆ›å»ºåˆ° ``Pizza``
å¯¹è±¡çš„ä»£ç å°±ä¸éœ€è¦ä¿®æ”¹äº†.-> ç®€å•å·¥å‚æ¨¡å¼


#### <text style="color:#03fca5">2.1.2 åŸºæœ¬ä»‹ç»</text>

1)	ç®€å•å·¥å‚æ¨¡å¼æ˜¯å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œæ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ç§ã€‚ç®€å•å·¥å‚æ¨¡å¼æ˜¯ç”±ä¸€ä¸ªå·¥å‚å¯¹è±¡å†³å®šåˆ›å»ºå‡ºå“ªä¸€ç§äº§å“ç±»çš„å®ä¾‹ã€‚ç®€å•å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ¨¡å¼å®¶æ—ä¸­æœ€ç®€å•å®ç”¨çš„æ¨¡å¼
2)	ç®€å•å·¥å‚æ¨¡å¼ï¼šå®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„ç±»ï¼Œç”±è¿™ä¸ªç±»æ¥å°è£…å®ä¾‹åŒ–å¯¹è±¡çš„è¡Œä¸º(ä»£ç )
3)	åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œå½“æˆ‘ä»¬ä¼šç”¨åˆ°å¤§é‡çš„åˆ›å»ºæŸç§ã€æŸç±»æˆ–è€…æŸæ‰¹å¯¹è±¡æ—¶ï¼Œå°±ä¼šä½¿ç”¨åˆ°å·¥å‚æ¨¡å¼.

#### <text style="color:#03fca5">2.1.3 ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼</text>

1)	ç®€å•å·¥å‚æ¨¡å¼çš„è®¾è®¡æ–¹æ¡ˆ: å®šä¹‰ä¸€ä¸ªå¯ä»¥å®ä¾‹åŒ– ``Pizaa`` å¯¹è±¡çš„ç±»ï¼Œå°è£…åˆ›å»ºå¯¹è±¡çš„ä»£ç ã€‚

{% asset_img 2021-11-21-17-35-00.png %}

ä»£ç å®ç°:

```java
//SimpleFactory.java
public class SimpleFactory {

    //æ ¹æ® orderType è¿”å›å¯¹åº”çš„ Pizza å¯¹è±¡
    public Pizza createPizza(String orderType) {
        Pizza pizza = null;
        System.out.println("ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼");
        if (orderType.equals("greek")) {
            pizza = new GreekPizza();
            pizza.setName(" å¸Œè…ŠæŠ«è¨ ");
        } else if (orderType.equals("cheese")) {
            pizza = new CheesePizza();
            pizza.setName(" å¥¶é…ªæŠ«è¨ ");
        }
        return pizza;
    }
   //-----------------------------------------------------//
    //ä½¿ç”¨é™æ€æ–¹æ³•ï¼Œç®€å•å·¥å‚ä¹Ÿè¢«ç§°ä¸ºé™æ€å·¥å‚
    public static Pizza createPizza2(String orderType){
        Pizza pizza = null;
        System.out.println("ä½¿ç”¨é™æ€å·¥å‚æ¨¡å¼");
        if (orderType.equals("greek")) {
            pizza = new GreekPizza();
            pizza.setName(" å¸Œè…ŠæŠ«è¨ ");
        } else if (orderType.equals("cheese")) {
            pizza = new CheesePizza();
            pizza.setName(" å¥¶é…ªæŠ«è¨ ");
        }
        return pizza;
    }

}
/***********************************************************/
//OrderPizzaFac.java --- è¿™æ˜¯ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼æ–¹æ³•
public class OrderPizzaFac {

    //å®šä¹‰ä¸€ä¸ªç®€å•å·¥å‚å¯¹è±¡
    SimpleFactory simpleFactory;
    Pizza pizza = null;

    public OrderPizzaFac(SimpleFactory simpleFactory) {
        setSimpleFactory(simpleFactory);
    }

    public void setSimpleFactory(SimpleFactory simpleFactory) {
        String orderType = "";

        this.simpleFactory = simpleFactory;

        do {
            orderType = GetType.getType();
            pizza = simpleFactory.createPizza(orderType);

            //è¾“å‡º pizza
            if (pizza != null) { //è®¢è´­æˆåŠŸ
                pizza.prepare();
                pizza.bake();
                pizza.cut();
                pizza.box();
            } else {
                System.out.println(" è®¢è´­æŠ«è¨å¤±è´¥ ");
                break;
            }

        } while (true);
    }
}
/***********************************************************/
//OrderPizzaFac2.java --- è¿™æ˜¯ä½¿ç”¨é™æ€å·¥å‚æ¨¡å¼æ–¹æ³•
public class OrderPizzaFac2 {

    Pizza pizza = null;

    public OrderPizzaFac2() {
        String orderType = "";

        do {
            orderType = GetType.getType();
            pizza = SimpleFactory.createPizza2(orderType);

            //è¾“å‡º pizza
            if (pizza != null) { //è®¢è´­æˆåŠŸ
                pizza.prepare();
                pizza.bake();
                pizza.cut();
                pizza.box();
            } else {
                System.out.println(" è®¢è´­æŠ«è¨å¤±è´¥ ");
                break;
            }

        } while (true);
    }

}
/***********************************************************/
//PizzaStore.java
public class PizzaStore {
    public static void main(String[] args) {
       // new OrderPizza();
        //new OrderPizzaFac(new SimpleFactory());

        new OrderPizzaFac2();
        System.out.println("~é€€å‡ºç¨‹åº~");
    }
}
```
ä½†æ˜¯ä¸€èˆ¬ä½¿ç”¨ç®€å•å·¥å‚ï¼Œå› ä¸ºé™æ€å·¥å‚çš„åˆ›å»ºæ–¹å¼è¿‡äºå•ä¸€

<HR style="border:1 double #987cb9" width="100%" color=#768768 SIZE=2>

### 2.2 <text style="color:#eb0942">å·¥å‚æ–¹æ³•æ¨¡å¼</text>

> çœ‹ä¸€ä¸ªæ–°çš„éœ€æ±‚
>
æŠ«è¨é¡¹ç›®æ–°çš„éœ€æ±‚ï¼šå®¢æˆ·åœ¨ç‚¹æŠ«è¨æ—¶ï¼Œå¯ä»¥ç‚¹ä¸åŒå£å‘³çš„æŠ«è¨ï¼Œæ¯”å¦‚ åŒ—äº¬çš„å¥¶é…ª ``pizza``ã€åŒ—äº¬çš„èƒ¡æ¤’ ``pizza`` æˆ–è€…æ˜¯ä¼¦æ•¦çš„å¥¶é…ª ``pizza``ã€ä¼¦æ•¦çš„èƒ¡æ¤’ ``pizza``ã€‚

> æ€è·¯ ``1``
> 
ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼ï¼Œåˆ›å»ºä¸åŒçš„ç®€å•å·¥å‚ç±»ï¼Œæ¯”å¦‚ ``BJPizzaSimpleFactoryã€LDPizzaSimpleFactory`` ç­‰ç­‰.ä»å½“å‰è¿™ä¸ªæ¡ˆä¾‹æ¥è¯´ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è€ƒè™‘åˆ°é¡¹ç›®çš„è§„æ¨¡ï¼Œä»¥åŠè½¯ä»¶çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å¹¶ä¸æ˜¯ç‰¹åˆ«å¥½

> æ€è·¯ ``2``
> 
ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼

#### <text style="color:#03fca5">2.2.1  å·¥å‚æ–¹æ³•æ¨¡å¼ä»‹ç»</text>

1)	å·¥å‚æ–¹æ³•æ¨¡å¼è®¾è®¡æ–¹æ¡ˆï¼šå°†æŠ«è¨é¡¹ç›®çš„å®ä¾‹åŒ–åŠŸèƒ½æŠ½è±¡æˆæŠ½è±¡æ–¹æ³•ï¼Œåœ¨ä¸åŒçš„å£å‘³ç‚¹é¤å­ç±»ä¸­å…·ä½“å®ç°ã€‚
2)	å·¥å‚æ–¹æ³•æ¨¡å¼ï¼šå®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼å°†å¯¹è±¡çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»ã€‚

#### <text style="color:#03fca5">2.2.2  å·¥å‚æ–¹æ³•æ¨¡å¼åº”ç”¨æ¡ˆä¾‹</text>
1)	æŠ«è¨é¡¹ç›®æ–°çš„éœ€æ±‚ï¼šå®¢æˆ·åœ¨ç‚¹æŠ«è¨æ—¶ï¼Œå¯ä»¥ç‚¹ä¸åŒå£å‘³çš„æŠ«è¨ï¼Œæ¯”å¦‚ åŒ—äº¬çš„å¥¶é…ª ``pizza``ã€åŒ—äº¬çš„èƒ¡æ¤’ ``pizza`` æˆ–è€…æ˜¯ä¼¦æ•¦çš„å¥¶é…ª ``pizza``ã€ä¼¦æ•¦çš„èƒ¡æ¤’ ``pizza``
2)  æ€è·¯åˆ†æå›¾è§£

{% asset_img 2021-11-21-17-35-26.png %}
é¡¹ç›®ç»“æ„


{% asset_img 2021-11-21-17-35-36.png %}

ä»£ç è§£æ

```java
//GetType.java
public class GetType {

    public static String getType(){
        try {
            BufferedReader strIn = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("input pizza type: ");
            String str = strIn.readLine();
            return str;
        } catch (Exception e) {
            e.printStackTrace();
            return "";
        }
    }
}
/***********************************************************/
//BJCheesePizza.java
public class BJCheesePizza extends Pizza{
    @Override
    public void prepare() {
        setName("åŒ—äº¬å¥¶é…ªæŠ«è¨");
        System.out.println("ç»™åˆ¶ä½œåŒ—äº¬å¥¶é…ªæŠ«è¨å‡†å¤‡åŸææ–™....");
    }
}
/***********************************************************/
//BJGreekPizza.java
public class BJGreekPizza extends Pizza{
    @Override
    public void prepare() {
        setName("åŒ—äº¬å¸Œè…ŠæŠ«è¨");
        System.out.println("ç»™åˆ¶ä½œåŒ—äº¬å¸Œè…ŠæŠ«è¨å‡†å¤‡åŸææ–™....");
    }
}
/***********************************************************/
//LDCheesePizza.java
public class LDCheesePizza extends Pizza{
    @Override
    public void prepare() {
        setName("ä¼¦æ•¦å¥¶é…ªæŠ«è¨");
        System.out.println("ç»™åˆ¶ä½œä¼¦æ•¦å¥¶é…ªæŠ«è¨å‡†å¤‡åŸææ–™....");
    }
}
/***********************************************************/
//LDGreekPizza.java
public class LDGreekPizza extends Pizza{
    @Override
    public void prepare() {
        setName("ä¼¦æ•¦å¸Œè…ŠæŠ«è¨");
        System.out.println("ç»™åˆ¶ä½œä¼¦æ•¦å¸Œè…ŠæŠ«è¨å‡†å¤‡åŸææ–™....");
    }
}
/***********************************************************/
//Pizza.java
public abstract class Pizza {
    protected String name;//åå­—

    //å‡†å¤‡åŸææ–™ï¼Œå› ä¸ºä¸åŒçš„æŠ«è¨ä¸ä¸€æ ·ï¼Œå› æ­¤è¿™è¾¹åšæˆæŠ½è±¡æ–¹æ³•
    public abstract void prepare();

    public void bake(){
        System.out.println(name+ " backing");
    }

    public void cut(){
        System.out.println(name+ " cutting");
    }

    public void box(){
        System.out.println(name+ " boxing");
    }

    public void setName(String name){
        this.name = name;
    }
}
/***********************************************************/
//OrderPizzaFactory.java
public abstract class OrderPizzaFactory {
    //å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ŒcreatePizza ,  è®©å„ä¸ªå·¥å‚å­ç±»è‡ªå·±å®ç°
    abstract Pizza createPizza(String orderType);

    //æ„é€ å™¨
    public OrderPizzaFactory() {
        Pizza pizza = null;
        String orderType;//è®¢è´­çš„æŠ«è¨ç±»å‹

        do {
            orderType = GetType.getType();
            pizza = createPizza(orderType);
            //è¾“å‡º pizza åˆ¶ä½œè¿‡ç¨‹
            pizza.prepare();
            pizza.bake();
            pizza.cut();
            pizza.box();
        } while (true);

    }
}
/***********************************************************/
//BJOrderPizza.java
public class BJOrderPizza extends OrderPizzaFactory {
    @Override
    Pizza createPizza(String orderType) {
        Pizza pizza = null;
        if (orderType.equals("cheese")) {
            pizza = new BJCheesePizza();
        } else if (orderType.equals("greek")) {
            pizza = new BJGreekPizza();
        }
        return pizza;
    }
}
/***********************************************************/
//LDOrderPizza.java
public class LDOrderPizza extends OrderPizzaFactory{
    @Override
    Pizza createPizza(String orderType) {
        Pizza pizza = null;
        if(orderType.equals("cheese")){
            pizza = new LDCheesePizza();
        }if (orderType.equals("greek")){
            pizza = new LDGreekPizza();
        }
        return pizza;
    }
}
/***********************************************************/
//PizzaStore.java
public class PizzaStore {
    public static void main(String[] args) {
       //new BJOrderPizza();
        new LDOrderPizza();
    }
}
```
> ä¸ªäººç†è§£å°±æ˜¯ç›¸æ¯”ç®€å•å·¥å‚æ¨¡å¼ï¼Œå› ä¸ºå¤šäº†ä¸€ä¸ªé€‰é¡¹ï¼ŒåŸæ¥çš„å£å‘³çš„æŠ«è¨ï¼Œå¤šäº†ä¸€ä¸ªåœ°åŒºçš„é™åˆ¶ï¼Œå› æ­¤å¯ä»¥ç†è§£ä¸ºå¤šåŠ äº†å±‚ï¼ŒåŸæ¥çš„ç®€å•å·¥å‚``ï¼ˆOrderPizzaFactoryï¼‰``ä¸åˆ›å»ºå¯¹è±¡ï¼Œå¤šåˆ›å»ºçš„ä¸€å±‚å­ç±»(``LDOrderPizza,BJOrderPizza``)æ¥å®ç°åˆ›å»ºã€‚


<HR style="border:1 double #987cb9" width="100%" color=#768768 SIZE=2>

### 2.3 <text style="color:#a666ad">æŠ½è±¡å·¥å‚æ¨¡å¼</text>


#### 2.3.1 åŸºæœ¬ä»‹ç»

1)	æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šå®šä¹‰äº†ä¸€ä¸ª ``interface`` ç”¨äºåˆ›å»ºç›¸å…³æˆ–æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡ç°‡ï¼Œè€Œæ— éœ€æŒ‡æ˜å…·ä½“çš„ç±»
2)	æŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥å°†ç®€å•å·¥å‚æ¨¡å¼å’Œå·¥å‚æ–¹æ³•æ¨¡å¼è¿›è¡Œæ•´åˆã€‚
3)	ä»è®¾è®¡å±‚é¢çœ‹ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼å°±æ˜¯å¯¹ç®€å•å·¥å‚æ¨¡å¼çš„æ”¹è¿›(æˆ–è€…ç§°ä¸ºè¿›ä¸€æ­¥çš„æŠ½è±¡)ã€‚
4)	å°†å·¥å‚æŠ½è±¡æˆä¸¤å±‚ï¼Œ``AbsFactory(æŠ½è±¡å·¥å‚)`` å’Œ å…·ä½“å®ç°çš„å·¥å‚å­ç±»ã€‚ç¨‹åºå‘˜å¯ä»¥æ ¹æ®åˆ›å»ºå¯¹è±¡ç±»å‹ä½¿ç”¨å¯¹åº”çš„å·¥å‚å­ç±»ã€‚è¿™æ ·å°†å•ä¸ªçš„ç®€å•å·¥å‚ç±»å˜æˆäº†å·¥å‚ç°‡ï¼Œæ›´åˆ©äºä»£ç çš„ç»´æŠ¤å’Œæ‰©å±•ã€‚
5)	ç±»å›¾

{% asset_img 2021-11-21-17-35-54.png %}
#### 2.3.2 æŠ½è±¡å·¥å‚æ¨¡å¼åº”ç”¨å®ä¾‹
ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼æ¥å®ŒæˆæŠ«è¨é¡¹ç›®:

é¡¹ç›®ç›®å½•ï¼š


{% asset_img 2021-11-21-17-36-05.png %}
**``pizza``åŒ…ä»£ç ä¸ä¸Šé¢å·¥å‚æ–¹æ³•æ¨¡å¼ä¸€è‡´ï¼Œè¿™è¾¹ä¸å†æ”¾å‡º**

```java
//AbsFactory.java
public interface AbsFactory {
    //è®©ä¸‹é¢çš„å·¥å‚å­ç±»æ¥ å…·ä½“å®ç°
    public Pizza createPizza(String orderType);

}
/***********************************************************/
//BJFactory.java
public class BJFactory implements AbsFactory {
    @Override
    public Pizza createPizza(String orderType) {
        System.out.println("~ä½¿ç”¨çš„æ˜¯æŠ½è±¡å·¥å‚æ¨¡å¼~");
        Pizza pizza = null;
        if(orderType.equals("cheese")){
            pizza = new BJCheesePizza();
        }else if(orderType.equals("greek")){
            pizza = new BJGreekPizza();
        }
        return pizza;
    }
}
/***********************************************************/
//LDFactory.java
public class LDFactory implements AbsFactory {
    @Override
    public Pizza createPizza(String orderType) {

        System.out.println("~ä½¿ç”¨çš„æ˜¯æŠ½è±¡å·¥å‚æ¨¡å¼~");
        Pizza pizza = null;

        if(orderType.equals("cheese")){
            pizza = new LDCheesePizza();
        }else if(orderType.equals("greek")){
            pizza = new LDGreekPizza();
        }
        return pizza;
    }
}
/***********************************************************/
//OrderPizza.java
public class OrderPizza {

    AbsFactory absFactory;

    // æ„é€ å™¨
    public OrderPizza(AbsFactory absFactory){
        setFactory(absFactory);
    }

    public void setFactory(AbsFactory absFactory){
        Pizza pizza = null;
        String orderType = "";//ç”¨æˆ·è¾“å…¥

        this.absFactory = absFactory;

        do {
            orderType = GetType.getType();
            // factory  å¯èƒ½æ˜¯åŒ—äº¬çš„å·¥å‚å­ç±»ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¼¦æ•¦çš„å·¥å‚å­ç±»
            pizza = absFactory.createPizza(orderType);

            if (pizza != null) { // è®¢ è´­ ok
                pizza.prepare();
                pizza.bake();
                pizza.cut();
                pizza.box();
            }else {
                System.out.println("è®¢è´­å¤±è´¥ï¼");
                break;
            }
            }while (true);

    }

}
/***********************************************************/
//StorePizzaAbs.java
public class PizzaStoreAbs {
    public static void main(String[] args) {
        //new OrderPizza(new BJFactory());
        new OrderPizza(new LDFactory());
    }
}
```

<HR style="border:1 double #987cb9" width="100%" color=#768768 SIZE=2>

### 2.4 <text style="color:#3f7a0f">å·¥å‚æ¨¡å¼åœ¨ ``JDK-Calendar`` åº”ç”¨çš„æºç åˆ†æ</text>

1)	``JDK`` ä¸­çš„ ``Calendar`` ç±»ä¸­ï¼Œå°±ä½¿ç”¨äº†ç®€å•å·¥å‚æ¨¡å¼
2)	æºç åˆ†æ+``Debug`` æºç +è¯´æ˜

å®ä¾‹ä»£ç 
```java
public class Factory {
    public static void main(String[] args) {
        // getInstance æ˜¯ Calendar é™æ€æ–¹æ³•
        Calendar cal = Calendar.getInstance();
        // æ³¨ æ„ æœˆ ä»½ ä¸‹ æ ‡ ä» 0 å¼€ å§‹ ï¼Œ æ‰€ ä»¥ å– æœˆ ä»½ è¦ +1
        System.out.println(" å¹´ :" + cal.get(Calendar.YEAR));
        System.out.println(" æœˆ :" + (cal.get(Calendar.MONTH) + 1));
        System.out.println("æ—¥:" + cal.get(Calendar.DAY_OF_MONTH));
        System.out.println(" æ—¶ :" + cal.get(Calendar.HOUR_OF_DAY));
        System.out.println(" åˆ† :" + cal.get(Calendar.MINUTE));
        System.out.println("ç§’:" + cal.get(Calendar.SECOND));
    }
}
```
``getInstance()``æ–¹æ³•

{% asset_img 2021-11-21-17-36-26.png %}

``createCalendar()``æ–¹æ³•
{% asset_img 2021-11-21-17-36-37.png %}
<HR style="border:1 double #987cb9" width="100%" color=#768768 SIZE=2>

### 2.5 <text style="color:#3f7a0f">å·¥å‚æ¨¡å¼å°ç»“</text>
1)	å·¥å‚æ¨¡å¼çš„æ„ä¹‰

    å°†å®ä¾‹åŒ–å¯¹è±¡çš„ä»£ç æå–å‡ºæ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªç±»ä¸­ç»Ÿä¸€ç®¡ç†å’Œç»´æŠ¤ï¼Œè¾¾åˆ°å’Œä¸»é¡¹ç›®çš„ä¾èµ–å…³ç³»çš„è§£è€¦ã€‚ä»è€Œæé«˜é¡¹ç›®çš„æ‰©å±•å’Œç»´æŠ¤æ€§ã€‚

2)	ä¸‰ç§å·¥å‚æ¨¡å¼ (ç®€å•å·¥å‚æ¨¡å¼ã€å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼)
3)	è®¾è®¡æ¨¡å¼çš„ä¾èµ–æŠ½è±¡åŸåˆ™

- åˆ›å»ºå¯¹è±¡å®ä¾‹æ—¶ï¼Œä¸è¦ç›´æ¥ ``new`` ç±», è€Œæ˜¯æŠŠè¿™ä¸ª ``new``  ç±»çš„åŠ¨ä½œæ”¾åœ¨ä¸€ä¸ªå·¥å‚çš„æ–¹æ³•ä¸­ï¼Œå¹¶è¿”å›ã€‚æœ‰çš„ä¹¦ä¸Šè¯´ï¼Œ å˜é‡ä¸è¦ç›´æ¥æŒæœ‰å…·ä½“ç±»çš„å¼•ç”¨ã€‚
- ä¸è¦è®©ç±»ç»§æ‰¿å…·ä½“ç±»ï¼Œè€Œæ˜¯ç»§æ‰¿æŠ½è±¡ç±»æˆ–è€…æ˜¯å®ç° ``interface``(æ¥å£)
- ä¸è¦è¦†ç›–åŸºç±»ä¸­å·²ç»å®ç°çš„æ–¹æ³•ã€‚

<HR style="border:3 double #987cb9" width="100%" color=#84fa2a SIZE=3>



## 3 <text style="color:#15fa00">åŸå‹æ¨¡å¼</text>

> å…‹éš†ç¾Šé—®é¢˜
> 
ç°åœ¨æœ‰ä¸€åªç¾Š ``tom``ï¼Œå§“åä¸º: ``tom``, å¹´é¾„ä¸ºï¼š``1``ï¼Œé¢œè‰²ä¸ºï¼šç™½è‰²ï¼Œè¯·ç¼–å†™ç¨‹åºåˆ›å»ºå’Œ ``tom`` ç¾Š å±æ€§å®Œå…¨ç›¸åŒçš„ ``10``åªç¾Šã€‚

> ä¼ ç»Ÿæ–¹å¼è§£å†³å…‹éš†ç¾Šé—®é¢˜

1)	æ€è·¯åˆ†æ(å›¾è§£)

   ![1620983190231.png](./img/1620983190231.png)

ä¼ ç»Ÿæ–¹æ³•ä½¿ç”¨ä¸æ–­``new``çš„æ–¹æ³•ï¼Œå®ç°è¯¥éœ€æ±‚ã€‚

> ä¼ ç»Ÿçš„æ–¹å¼çš„ä¼˜ç¼ºç‚¹

1)	ä¼˜ç‚¹æ˜¯æ¯”è¾ƒå¥½ç†è§£ï¼Œç®€å•æ˜“æ“ä½œã€‚
2)	åœ¨åˆ›å»ºæ–°çš„å¯¹è±¡æ—¶ï¼Œæ€»æ˜¯éœ€è¦é‡æ–°è·å–åŸå§‹å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœåˆ›å»ºçš„å¯¹è±¡æ¯”è¾ƒå¤æ‚æ—¶ï¼Œæ•ˆç‡è¾ƒä½
3)	æ€»æ˜¯éœ€è¦é‡æ–°åˆå§‹åŒ–å¯¹è±¡ï¼Œè€Œä¸æ˜¯åŠ¨æ€åœ°è·å¾—å¯¹è±¡è¿è¡Œæ—¶çš„çŠ¶æ€, ä¸å¤Ÿçµæ´»
4)	æ”¹è¿›çš„æ€è·¯åˆ†æ

æ€è·¯ï¼š``Java`` ä¸­ ``Object`` ç±»æ˜¯æ‰€æœ‰ç±»çš„æ ¹ç±»ï¼Œ``Object`` ç±»æä¾›äº†ä¸€ä¸ª ``clone()``æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ª ``Java`` å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œä½†æ˜¯éœ€è¦å®ç° ``clone`` çš„``Java`` ç±»å¿…é¡»è¦å®ç°ä¸€ä¸ªæ¥å£``Cloneable``ï¼Œè¯¥æ¥å£è¡¨ç¤ºè¯¥ç±»èƒ½å¤Ÿå¤åˆ¶ä¸”å…·æœ‰å¤åˆ¶çš„èƒ½åŠ›  ``=>``  åŸå‹æ¨¡å¼

### 3.1 <text style="color:#749171">åŸå‹æ¨¡å¼-åŸºæœ¬ä»‹ç»</text>

1)	åŸå‹æ¨¡å¼(``Prototype`` æ¨¡å¼)æ˜¯æŒ‡ï¼šç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹ï¼Œåˆ›å»ºæ–°çš„å¯¹è±¡
2)	åŸå‹æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå…è®¸ä¸€ä¸ªå¯¹è±¡å†åˆ›å»ºå¦å¤–ä¸€ä¸ªå¯å®šåˆ¶çš„å¯¹è±¡ï¼Œæ— éœ€çŸ¥é“å¦‚ä½•åˆ›å»ºçš„ç»†èŠ‚
3)	å·¥ä½œåŸç†æ˜¯:é€šè¿‡å°†ä¸€ä¸ªåŸå‹å¯¹è±¡ä¼ ç»™é‚£ä¸ªè¦å‘åŠ¨åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™ä¸ªè¦å‘åŠ¨åˆ›å»ºçš„å¯¹è±¡é€šè¿‡è¯·æ±‚åŸå‹å¯¹è±¡æ‹·è´å®ƒä»¬è‡ªå·±æ¥å®æ–½åˆ›å»ºï¼Œå³ ``å¯¹è±¡.clone()``
4)	å½¢è±¡çš„ç†è§£ï¼šå­™å¤§åœ£æ‹”å‡ºçŒ´æ¯›ï¼Œ å˜å‡ºå…¶å®ƒå­™å¤§åœ£

### 3.2 <text style="color:#1e9412">åŸå‹æ¨¡å¼åŸç†ç»“æ„å›¾-``uml`` ç±»å›¾</text>

{% asset_img 2021-11-21-17-39-37.png %}
> ïƒ˜	åŸç†ç»“æ„å›¾è¯´æ˜
> 
1)	``Prototype`` : åŸå‹ç±»ï¼Œå£°æ˜ä¸€ä¸ªå…‹éš†è‡ªå·±çš„æ¥å£
2)	``ConcretePrototype``: å…·ä½“çš„åŸå‹ç±»,  å®ç°ä¸€ä¸ªå…‹éš†è‡ªå·±çš„æ“ä½œ
3)	``Client``: è®©ä¸€ä¸ªåŸå‹å¯¹è±¡å…‹éš†è‡ªå·±ï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡(å±æ€§ä¸€æ ·ï¼‰

### 3.3 <text style="color:#1e9460">  åŸå‹æ¨¡å¼è§£å†³å…‹éš†ç¾Šé—®é¢˜çš„åº”ç”¨å®ä¾‹</text>

ä½¿ç”¨åŸå‹æ¨¡å¼æ”¹è¿›ä¼ ç»Ÿæ–¹å¼ï¼Œè®©ç¨‹åºå…·æœ‰æ›´é«˜çš„æ•ˆç‡å’Œæ‰©å±•æ€§ã€‚

```java
//sheep.java
public class Sheep implements Cloneable{
    private String name;
    private int age;
    private String color;

    public Sheep(String name, int age, String color) {
        this.name = name;
        this.age = age;
        this.color = color;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getColor() {
        return color;
    }

    public void setColor(String color) {
        this.color = color;
    }

    @Override
    public String toString() {
        return "Sheep{" +
                "name='" + name + '\'' +
                ", age=" + age +
                ", color='" + color + '\'' +
                '}';
    }
    //å…‹éš†è¯¥å®ä¾‹ï¼Œä½¿ç”¨é»˜è®¤çš„ clone æ–¹æ³•æ¥å®Œæˆ
    @Override
    protected Object clone() throws CloneNotSupportedException {
        Sheep sheep = null;
        try {
            sheep = (Sheep) super.clone();

        } catch (CloneNotSupportedException e) {
            e.printStackTrace();
        }
        return sheep;
    }
}
/***********************************************************/
//Client.java
public class Client {
    public static void main(String[] args) throws CloneNotSupportedException {
        Sheep sheep = new Sheep("tom", 1, "ç™½è‰²");

        Sheep sheep1 = (Sheep) sheep.clone();
        Sheep sheep2 = (Sheep) sheep.clone();
        Sheep sheep3 = (Sheep) sheep.clone();
        Sheep sheep4 = (Sheep) sheep.clone();

        System.out.println("sheep1: "+sheep1+" ---- "+ "sheep.hashCode: "+ sheep1.hashCode());
        System.out.println("sheep2: "+sheep2+" ---- "+ "sheep.hashCode: "+ sheep2.hashCode());
        System.out.println("sheep3: "+sheep3+" ---- "+ "sheep.hashCode: "+ sheep3.hashCode());
        System.out.println("sheep4: "+sheep4+" ---- "+ "sheep.hashCode: "+ sheep4.hashCode());

    }
}
```
æ‰“å°ç»“æœ

{% asset_img 2021-11-21-17-39-58.png %}

å¯ä»¥è§‚å¯Ÿåˆ°å“ˆå¸Œå€¼ä¸ä¸€è‡´ï¼Œå®ç°äº†æ·±æ‹·è´ã€‚

<HR style="border:3 double #987cb9" width="100%" color=#84fa2a SIZE=3>

ğŸŒŸ
**ä½†æ˜¯ï¼ŒåŸç”Ÿçš„``Object`` æ–¹æ³•åªèƒ½å®ç°åŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠ ``String`` æ–¹æ³•çš„ æ·±æ‹·è´ï¼Œæ‰€ä»¥ï¼Œåœ¨å®ä½“ç±»ä¸­å¼•ç”¨ä¸€äº›å…¶ä»–ä¸€äº›å¼•ç”¨ç±»å‹æ—¶ï¼Œéœ€è¦é€šè¿‡åˆ«çš„æ–¹æ³•å®ç°æ·±æ‹·è´**
ğŸŒŸ

æˆ‘ä»¬åœ¨``Sheep``ä¸­æ–°æ·»ä¸€ä¸ª ``Sheep``å¼•ç”¨
```java
private String name;
private int age; 
private String color;
public Sheep friend; //æ˜¯å¯¹è±¡,  å…‹éš†æ˜¯ä¼šå¦‚ä½•å¤„ç†,  é»˜è®¤æ˜¯æµ…æ‹·è´
``` 
è¿›è¡Œä¸Šè¿°æµ‹è¯•

{% asset_img 2021-11-21-17-40-34.png %}

å¯ä»¥çœ‹åˆ°ï¼Œ``jdk``é»˜è®¤çš„``Clone``æ–¹æ³•åªèƒ½å¤åˆ¶åŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠ``String``ç±»å‹çš„å˜é‡ï¼Œå¯¹äºå…¶ä»–çš„å¼•ç”¨ç±»å‹å˜é‡ï¼Œéƒ½æ˜¯åªæ˜¯æ–°å¢ä¸€ä¸ªå¼•ç”¨ã€‚æ‰€ä»¥é»˜è®¤``Clone ``åªæ˜¯æµ…æ‹·è´ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨å…¶ä»–åŠæ³•å®ç°æ·±æ‹·è´ã€‚

### 3.4 <text style="color:#4e9946">åŸå‹æ¨¡å¼åœ¨ ``Spring`` æ¡†æ¶ä¸­æºç åˆ†æ</text>
1)	``Spring`` ä¸­åŸå‹ ``bean`` çš„åˆ›å»ºï¼Œå°±æ˜¯åŸå‹æ¨¡å¼çš„åº”ç”¨
2)	ä»£ç åˆ†æ + ``Debug`` æºç 

{% asset_img 2021-11-21-17-40-46.png %}
### 3.5 <text style="color:#3c5d75">æ·±å…¥è®¨è®º-æµ…æ‹·è´å’Œæ·±æ‹·è´</text>

> æµ…æ‹·è´çš„ä»‹ç»

1)	å¯¹äºæ•°æ®ç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œæµ…æ‹·è´ä¼šç›´æ¥è¿›è¡Œå€¼ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯å°†è¯¥å±æ€§å€¼å¤åˆ¶ä¸€ä»½ç»™æ–°çš„å¯¹è±¡ã€‚
2)	å¯¹äºæ•°æ®ç±»å‹æ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œæ¯”å¦‚è¯´æˆå‘˜å˜é‡æ˜¯æŸä¸ªæ•°ç»„ã€æŸä¸ªç±»çš„å¯¹è±¡ç­‰ï¼Œé‚£ä¹ˆæµ…æ‹·è´ä¼šè¿›è¡Œå¼•ç”¨ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯åªæ˜¯å°†è¯¥æˆå‘˜å˜é‡çš„å¼•ç”¨å€¼ï¼ˆå†…å­˜åœ°å€ï¼‰å¤åˆ¶ä¸€ä»½ç»™æ–°çš„å¯¹è±¡ã€‚å› ä¸ºå®é™…ä¸Šä¸¤ä¸ªå¯¹è±¡çš„è¯¥æˆå‘˜å˜é‡éƒ½æŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ä¿®æ”¹è¯¥æˆå‘˜å˜é‡ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„è¯¥æˆå‘˜å˜é‡å€¼
3)	å‰é¢æˆ‘ä»¬å…‹éš†ç¾Šå°±æ˜¯æµ…æ‹·è´
4)	æµ…æ‹·è´æ˜¯ä½¿ç”¨é»˜è®¤çš„ ``clone()``æ–¹æ³•æ¥å®ç°
 ```java   
     sheep = (Sheep) super.clone();
 ```
### 3.6 <text style="color:#403e59">æ·±æ‹·è´åŸºæœ¬ä»‹ç»</text>
1)	å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰åŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡å€¼
2)	ä¸ºæ‰€æœ‰å¼•ç”¨æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ç”³è¯·å­˜å‚¨ç©ºé—´ï¼Œå¹¶å¤åˆ¶æ¯ä¸ªå¼•ç”¨æ•°æ®ç±»å‹æˆå‘˜å˜é‡æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œç›´åˆ°è¯¥å¯¹è±¡å¯è¾¾çš„æ‰€æœ‰å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹è±¡è¿›è¡Œæ·±æ‹·è´è¦å¯¹æ•´ä¸ªå¯¹è±¡(åŒ…æ‹¬å¯¹è±¡çš„å¼•ç”¨ç±»å‹)è¿›è¡Œæ‹·è´

3)	æ·±æ‹·è´å®ç°æ–¹å¼ ``1``ï¼šé‡å†™ ``clone`` æ–¹æ³•æ¥å®ç°æ·±æ‹·è´
4)	æ·±æ‹·è´å®ç°æ–¹å¼ ``2``ï¼šé€šè¿‡å¯¹è±¡åºåˆ—åŒ–å®ç°æ·±æ‹·è´(æ¨è)

### 3.7 <text style="color:#8e8bb0">æ·±æ‹·è´åº”ç”¨å®ä¾‹</text>

1)	ä½¿ç”¨ é‡å†™ ``clone`` æ–¹æ³•å®ç°æ·±æ‹·è´
2)	ä½¿ç”¨åºåˆ—åŒ–æ¥å®ç°æ·±æ‹·è´
3)	ä»£ç æ¼”ç¤º

```java
//DeepCloneableTarget.java
public class DeepCloneableTarget implements Serializable,Cloneable {
    private static final long serialVersionUID = 1L;

    private String cloneName;

    private String cloneClass;

    //æ„é€ å™¨
    public DeepCloneableTarget(String cloneName, String cloneClass) {
        this.cloneName = cloneName;
        this.cloneClass = cloneClass;
    }

    //å› ä¸ºè¯¥ç±»çš„å±æ€§ï¼Œéƒ½æ˜¯ String ,  å› æ­¤æˆ‘ä»¬è¿™é‡Œä½¿ç”¨é»˜è®¤çš„ clone å®Œæˆå³å¯
    @Override
    protected Object clone() throws CloneNotSupportedException {
        return super.clone();
    }

}
/***********************************************************/
//DeepProtoType.java
public class DeepProtoType implements Serializable,Cloneable {

    public String name; //String å± æ€§
    public DeepCloneableTarget deepCloneableTarget;// å¼•ç”¨ç±»å‹

    public DeepProtoType() {
        super();
    }

    //æ·±æ‹·è´ - æ–¹å¼ 1  ä½¿ç”¨ clone æ–¹æ³•
//    @Override
//    protected Object clone() throws CloneNotSupportedException {
//
//        Object deep = null;
//        //è¿™é‡Œå®Œæˆå¯¹åŸºæœ¬æ•°æ®ç±»å‹(å±æ€§)å’Œ String çš„å…‹éš†
//        deep = super.clone();
//        //å¯¹å¼•ç”¨ç±»å‹çš„å±æ€§ï¼Œè¿›è¡Œå•ç‹¬å¤„ç†
//
//        DeepProtoType deepProtoType = (DeepProtoType) deep;
//        deepProtoType.deepCloneableTarget = (DeepCloneableTarget) deepCloneableTarget.clone();
//
//        return deepProtoType;
//    }

    //æ·±æ‹·è´ - æ–¹å¼ 2 é€šè¿‡å¯¹è±¡çš„åºåˆ—åŒ–å®ç° (æ¨è)
    @Override
    protected Object clone() throws CloneNotSupportedException {
        DeepProtoType deepProtoType = null;

        //1.ç¬¬ä¸€æ­¥
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        try(ObjectOutputStream oos = new ObjectOutputStream(bos);){
            //åºåˆ—åŒ–
            oos.writeObject(this);

        } catch (IOException e) {
            e.printStackTrace();
        }

        //2.ç¬¬äºŒæ­¥
        ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());
        try(ObjectInputStream ois = new ObjectInputStream(bis)) {
            //ååºåˆ—åŒ–
            deepProtoType  = (DeepProtoType) ois.readObject();
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }

        return deepProtoType;
    }
}
/***********************************************************/
//Client.java
public class Client {
    public static void main(String[] args) throws CloneNotSupportedException {
        DeepProtoType p = new DeepProtoType();
        p.name = "æä¸‰";
        p.deepCloneableTarget = new DeepCloneableTarget("å¤§ç‰›","å°ç‰›");

        DeepProtoType p2 = (DeepProtoType) p.clone();

        System.out.println("p.name=" + p.name + "---------" +"p.deepCloneableTarget=" + p.deepCloneableTarget.hashCode());
        System.out.println("p2.name=" + p.name + "---------" + "p2.deepCloneableTarget=" + p2.deepCloneableTarget.hashCode());

    }
}
```

{% asset_img 2021-11-21-17-40-59.png %}
é€šè¿‡ä¸¤ç§åŠæ³•å®ç°äº†æ·±æ‹·è´ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œç¬¬ä¸€ç§æ–¹æ³•æ¯”è¾ƒæ–¹ä¾¿ï¼Œç¬¬äºŒç§æ–¹æ³•æ¯”è¾ƒé€šç”¨ï¼Œä½†æ˜¯å†™èµ·æ¥ä¼šæœ‰ä¸€ç‚¹ç‚¹éº»çƒ¦ï¼Œæ ¹æ®æƒ…å†µé€‰æ‹©å³å¯ã€‚

### 3.8 <text style="color:#8e8bb0">åŸå‹æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</text>

1)	åˆ›å»ºæ–°çš„å¯¹è±¡æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå¯ä»¥åˆ©ç”¨åŸå‹æ¨¡å¼ç®€åŒ–å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿæé«˜æ•ˆç‡
2)	ä¸ç”¨é‡æ–°åˆå§‹åŒ–å¯¹è±¡ï¼Œè€Œæ˜¯åŠ¨æ€åœ°è·å¾—å¯¹è±¡è¿è¡Œæ—¶çš„çŠ¶æ€
3)	å¦‚æœåŸå§‹å¯¹è±¡å‘ç”Ÿå˜åŒ–(å¢åŠ æˆ–è€…å‡å°‘å±æ€§)ï¼Œå…¶å®ƒå…‹éš†å¯¹è±¡çš„ä¹Ÿä¼šå‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
4)	åœ¨å®ç°æ·±å…‹éš†çš„æ—¶å€™å¯èƒ½éœ€è¦æ¯”è¾ƒå¤æ‚çš„ä»£ç 
5)	ç¼ºç‚¹ï¼šéœ€è¦ä¸ºæ¯ä¸€ä¸ªç±»é…å¤‡ä¸€ä¸ªå…‹éš†æ–¹æ³•ï¼Œè¿™å¯¹å…¨æ–°çš„ç±»æ¥è¯´ä¸æ˜¯å¾ˆéš¾ï¼Œä½†å¯¹å·²æœ‰çš„ç±»è¿›è¡Œæ”¹é€ æ—¶ï¼Œéœ€è¦ä¿®æ”¹å…¶æºä»£ç ï¼Œè¿èƒŒäº† ``ocp`` åŸåˆ™ï¼Œè¿™ç‚¹è¯·åŒå­¦ä»¬æ³¨æ„.

<HR style="border:3 double #987cb9" width="100%" color=#84fa2a SIZE=3>



## 4 <text style="color:#15fa00">å»ºé€ è€…æ¨¡å¼</text>

> ç›–æˆ¿é¡¹ç›®éœ€æ±‚

1)	éœ€è¦å»ºæˆ¿å­ï¼šè¿™ä¸€è¿‡ç¨‹ä¸ºæ‰“æ¡©ã€ç Œå¢™ã€å°é¡¶
2)	æˆ¿å­æœ‰å„ç§å„æ ·çš„ï¼Œæ¯”å¦‚æ™®é€šæˆ¿ï¼Œé«˜æ¥¼ï¼Œåˆ«å¢…ï¼Œå„ç§æˆ¿å­çš„è¿‡ç¨‹è™½ç„¶ä¸€æ ·ï¼Œä½†æ˜¯è¦æ±‚ä¸è¦ç›¸åŒçš„.
3)	è¯·ç¼–å†™ç¨‹åºï¼Œå®Œæˆéœ€æ±‚.

> ä¼ ç»Ÿæ–¹å¼è§£å†³ç›–æˆ¿éœ€æ±‚

1)	æ€è·¯åˆ†æ(å›¾è§£)

     {% asset_img 2021-11-21-17-41-12.png %}

2) ä»£ç æ¼”ç¤º

```java
//AbstractHouse.java
public abstract class AbstractHouse {
    //æ‰“åœ°åŸº
    public abstract void buildBasic();
    //ç Œå¢™
    public abstract void buildWalls();
    //å°é¡¶
    public abstract void roofed();

    public void build(){
        buildBasic();
        buildWalls();
        roofed();
    }

}
/***********************************************************/
//CommonHouse.java
public class CommonHouse extends AbstractHouse{

    @Override
    public void buildBasic() {
        System.out.println(" æ™®é€šæˆ¿å­æ‰“åœ°åŸº ");
    }

    @Override
    public void buildWalls() {
        System.out.println(" æ™®é€šæˆ¿å­ç Œå¢™ ");
    }

    @Override
    public void roofed() {
        System.out.println(" æ™®é€šæˆ¿å­å°é¡¶ ");
    }
}
/***********************************************************/
//Client.java
public class Client {
    public static void main(String[] args) {
        CommonHouse commonHouse = new CommonHouse();
        commonHouse.build();
    }
}
```
> ä¼ ç»Ÿæ–¹å¼çš„é—®é¢˜åˆ†æ

1)	ä¼˜ç‚¹æ˜¯æ¯”è¾ƒå¥½ç†è§£ï¼Œç®€å•æ˜“æ“ä½œã€‚
2)	è®¾è®¡çš„ç¨‹åºç»“æ„ï¼Œè¿‡äºç®€å•ï¼Œæ²¡æœ‰è®¾è®¡ç¼“å­˜å±‚å¯¹è±¡ï¼Œç¨‹åºçš„æ‰©å±•å’Œç»´æŠ¤ä¸å¥½. ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ç§è®¾è®¡æ–¹æ¡ˆï¼ŒæŠŠäº§å“(å³ï¼šæˆ¿å­) å’Œ åˆ›å»ºäº§å“çš„è¿‡ç¨‹(å³ï¼šå»ºæˆ¿å­æµç¨‹) å°è£…åœ¨ä¸€èµ·ï¼Œè€¦åˆæ€§å¢å¼ºäº†ã€‚
3)	è§£å†³æ–¹æ¡ˆï¼šå°†äº§å“å’Œäº§å“å»ºé€ è¿‡ç¨‹è§£è€¦  =>	å»ºé€ è€…æ¨¡å¼.

### 4.1 <text style="color:#622866">å»ºé€ è€…æ¨¡å¼åŸºæœ¬ä»‹ç»</text>

1)	å»ºé€ è€…æ¨¡å¼ï¼ˆ``Builder Pattern``ï¼‰ åˆå«ç”Ÿæˆå™¨æ¨¡å¼ï¼Œæ˜¯ä¸€ç§å¯¹è±¡æ„å»ºæ¨¡å¼ã€‚å®ƒå¯ä»¥å°†å¤æ‚å¯¹è±¡çš„å»ºé€ è¿‡ç¨‹æŠ½è±¡å‡ºæ¥ï¼ˆæŠ½è±¡ç±»åˆ«ï¼‰ï¼Œä½¿è¿™ä¸ªæŠ½è±¡è¿‡ç¨‹çš„ä¸åŒå®ç°æ–¹æ³•å¯ä»¥æ„é€ å‡ºä¸åŒè¡¨ç°ï¼ˆå±æ€§ï¼‰çš„å¯¹è±¡ã€‚
2)	å»ºé€ è€…æ¨¡å¼ æ˜¯ä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œå®ƒå…è®¸ç”¨æˆ·åªé€šè¿‡æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å’Œå†…å®¹å°±å¯ä»¥æ„å»ºå®ƒä»¬ï¼Œ ç”¨æˆ·ä¸éœ€è¦çŸ¥é“å†…éƒ¨çš„å…·ä½“æ„å»ºç»†èŠ‚ã€‚

### 4.2 <text style="color:#73203d">å»ºé€ è€…æ¨¡å¼çš„å››ä¸ªè§’è‰²</text>

1)	``Product``ï¼ˆäº§å“è§’è‰²ï¼‰ï¼š ä¸€ä¸ªå…·ä½“çš„äº§å“å¯¹è±¡ã€‚
2)	``Builder``ï¼ˆæŠ½è±¡å»ºé€ è€…ï¼‰ï¼š åˆ›å»ºä¸€ä¸ª ``Product`` å¯¹è±¡çš„å„ä¸ªéƒ¨ä»¶æŒ‡å®šçš„ æ¥å£/æŠ½è±¡ç±»ã€‚

3)	``ConcreteBuilderï¼ˆå…·ä½“å»ºé€ è€…ï¼‰ï¼š`` å®ç°æ¥å£ï¼Œæ„å»ºå’Œè£…é…å„ä¸ªéƒ¨ä»¶ã€‚
4)	``Directorï¼ˆæŒ‡æŒ¥è€…ï¼‰ï¼š`` æ„å»ºä¸€ä¸ªä½¿ç”¨ ``Builder`` æ¥å£çš„å¯¹è±¡ã€‚å®ƒä¸»è¦æ˜¯ç”¨äºåˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚å®ƒä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€æ˜¯ï¼šéš”ç¦»äº†å®¢æˆ·ä¸å¯¹è±¡çš„ç”Ÿäº§è¿‡ç¨‹ï¼ŒäºŒæ˜¯ï¼šè´Ÿè´£æ§åˆ¶äº§å“å¯¹è±¡çš„ç”Ÿäº§è¿‡ç¨‹ã€‚

### 4.3 <text style="color:#781d61">å»ºé€ è€…æ¨¡å¼åŸç†ç±»å›¾</text>


{% asset_img 2021-11-21-17-41-25.png %}
### 4.4 <text style="color:#33a151">å»ºé€ è€…æ¨¡å¼è§£å†³ç›–æˆ¿éœ€æ±‚åº”ç”¨å®ä¾‹</text>

1)	éœ€è¦å»ºæˆ¿å­ï¼šè¿™ä¸€è¿‡ç¨‹ä¸ºæ‰“æ¡©ã€ç Œå¢™ã€å°é¡¶ã€‚ä¸ç®¡æ˜¯æ™®é€šæˆ¿å­ä¹Ÿå¥½ï¼Œåˆ«å¢…ä¹Ÿå¥½éƒ½éœ€è¦ç»å†è¿™äº›è¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬ä½¿ç”¨å»ºé€ è€…æ¨¡å¼(``Builder Pattern``)æ¥å®Œæˆ
2)	æ€è·¯åˆ†æå›¾è§£(ç±»å›¾)

{% asset_img 2021-11-21-17-41-32.png %}
3) ä»£ç å®ç°

ç›®å½•ç»“æ„

{% asset_img 2021-11-21-17-41-41.png %}

```java
//House.java
// äº§ å“ ->Product
@Data
public class House {
    private String basis;
    private String wall;
    private String roofed;
}
/***********************************************************/
//HouseBuilder.java
//æŠ½è±¡çš„å»ºé€ è€…
public abstract class HouseBuilder {

    protected House house = new House();

    //å°†å»ºé€ çš„æµç¨‹å†™å¥½, æŠ½è±¡çš„æ–¹æ³•
    public abstract void buildBasis();

    public abstract void buildWalls();

    public abstract void roofed();

    //å»ºé€ æˆ¿å­å¥½ï¼Œ å°†äº§å“(æˆ¿å­) è¿”å›
    public House buildHouse(){
        return house;
    }

}
/***********************************************************/
//HouseDirector.java
//æŒ‡æŒ¥è€…ï¼Œè¿™é‡Œå»æŒ‡å®šåˆ¶ä½œæµç¨‹ï¼Œè¿”å›äº§å“
public class HouseDirector {
    HouseBuilder houseBuilder = null;

    //é€šè¿‡æ„é€ å™¨ä¼ å…¥
    public HouseDirector(HouseBuilder houseBuilder){
        this.houseBuilder = houseBuilder;
    }

    //é€šè¿‡setterä¼ å…¥
    public void setHouseBuilder(HouseBuilder houseBuilder){
        this.houseBuilder = houseBuilder;
    }

    //å¦‚ä½•å¤„ç†å»ºé€ æˆ¿å­çš„æµç¨‹ï¼Œäº¤ç»™æŒ‡æŒ¥è€…
    public House constructHouse(){
        houseBuilder.buildBasis();
        houseBuilder.buildWalls();
        houseBuilder.roofed();

        return houseBuilder.buildHouse();
    }

}
/***********************************************************/
//CommonHouse.java   --- å…·ä½“çš„å»ºé€ è€…
public class CommonHouse extends HouseBuilder {

    @Override
    public void buildBasis() {
        System.out.println(" æ™®é€šæˆ¿å­æ‰“åœ°åŸº 5 ç±³ ");
    }

    @Override
    public void buildWalls() {
        System.out.println(" æ™®é€šæˆ¿å­ç Œå¢™ 10cm ");
    }

    @Override
    public void roofed() {
        System.out.println(" æ™®é€šæˆ¿å­å±‹é¡¶ ");
    }

}
/***********************************************************/
//HighBuildingHouse.java   --- å…·ä½“çš„å»ºé€ è€…
public class HighBuildingHouse extends HouseBuilder {
    @Override
    public void buildBasis() {
        System.out.println(" é«˜æ¥¼çš„æ‰“åœ°åŸº 100 ç±³ ");
    }

    @Override
    public void buildWalls() {
        System.out.println(" é«˜æ¥¼çš„ç Œå¢™ 20cm ");
    }

    @Override
    public void roofed() {
        System.out.println(" é«˜æ¥¼çš„é€æ˜å±‹é¡¶ ");
    }
}
/***********************************************************/
//Client.java
public class Client {
    public static void main(String[] args) {
        //å»ºé€ æ™®é€šæˆ¿å­
        CommonHouse commonHouse = new CommonHouse();
        //å‡†å¤‡åˆ›å»ºæˆ¿å­çš„æŒ‡æŒ¥è€…
        HouseDirector houseDirector = new HouseDirector(commonHouse);
        //å®Œæˆç›–æˆ¿å­ï¼Œè¿”å›äº§å“(æ™®é€šæˆ¿å­)
        houseDirector.constructHouse();

        //System.out.println(" è¾“ å‡º æµ ç¨‹ ");

        System.out.println(" ------------------ ");

        //ç›–é«˜æ¥¼
        HighBuildingHouse highBuildingHouse = new HighBuildingHouse();
        //é‡ç½®å»ºé€ è€…
        houseDirector.setHouseBuilder(highBuildingHouse);
        //å®Œæˆç›–æˆ¿å­ï¼Œè¿”å›äº§å“(é«˜æ¥¼)
        houseDirector.constructHouse();
    }
}
```
### 4.5 <text style="color:#c2f571">å»ºé€ è€…æ¨¡å¼åœ¨``JDK`` çš„åº”ç”¨å’Œæºç åˆ†æ</text>
1)	``java.lang.StringBuilder`` ä¸­çš„å»ºé€ è€…æ¨¡å¼
2)	ä»£ç è¯´æ˜+``Debug`` æºç 


{% asset_img 2021-11-21-17-41-54.png %}
3)	æºç ä¸­å»ºé€ è€…æ¨¡å¼è§’è‰²åˆ†æ

- 	``Appendable`` æ¥å£å®šä¹‰äº†å¤šä¸ª ``append`` æ–¹æ³•(æŠ½è±¡æ–¹æ³•), å³ ``Appendable`` ä¸ºæŠ½è±¡å»ºé€ è€…, å®šä¹‰äº†æŠ½è±¡æ–¹æ³•
-   ``AbstractStringBuilder``  å®ç°äº†  ``Appendable``  æ¥å£æ–¹æ³•ï¼Œè¿™é‡Œçš„  ``AbstractStringBuilder``	å·²ç»æ˜¯å»ºé€ è€…ï¼Œåªæ˜¯ä¸èƒ½å®ä¾‹åŒ–
-   ``StringBuilder`` å³å……å½“äº†æŒ‡æŒ¥è€…è§’è‰²ï¼ŒåŒæ—¶å……å½“äº†å…·ä½“çš„å»ºé€ è€…ï¼Œå»ºé€ æ–¹æ³•çš„å®ç°æ˜¯ç”± ``AbstractStringBuilder`` å®Œæˆ , è€Œ ``StringBuilder``	ç»§æ‰¿äº† ``AbstractStringBuilder``

### 4.6 <text style="color:#3f4a2f">å»ºé€ è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</text>
1)	å®¢æˆ·ç«¯(ä½¿ç”¨ç¨‹åº)ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå°†äº§å“æœ¬èº«ä¸äº§å“çš„åˆ›å»ºè¿‡ç¨‹è§£è€¦ï¼Œä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“å¯¹è±¡
2)	æ¯ä¸€ä¸ªå…·ä½“å»ºé€ è€…éƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œè€Œä¸å…¶ä»–çš„å…·ä½“å»ºé€ è€…æ— å…³ï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢å…·ä½“å»ºé€ è€…æˆ–å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…ï¼Œ ç”¨æˆ·ä½¿ç”¨ä¸åŒçš„å…·ä½“å»ºé€ è€…å³å¯å¾—åˆ°ä¸åŒçš„äº§å“å¯¹è±¡
3)	å¯ä»¥æ›´åŠ ç²¾ç»†åœ°æ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ ã€‚å°†å¤æ‚äº§å“çš„åˆ›å»ºæ­¥éª¤åˆ†è§£åœ¨ä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹æ›´åŠ æ¸…æ™°ï¼Œ ä¹Ÿæ›´æ–¹ä¾¿ä½¿ç”¨ç¨‹åºæ¥æ§åˆ¶åˆ›å»ºè¿‡ç¨‹
4)	å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…æ— é¡»ä¿®æ”¹åŸæœ‰ç±»åº“çš„ä»£ç ï¼ŒæŒ‡æŒ¥è€…ç±»é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç±»ç¼–ç¨‹ï¼Œç³»ç»Ÿæ‰©å±•æ–¹ä¾¿ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€
5)	å»ºé€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ï¼Œå¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚æ€§å¾ˆå¤§ï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å—åˆ°ä¸€å®šçš„é™åˆ¶ã€‚
6)	å¦‚æœäº§å“çš„å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´éœ€è¦å®šä¹‰å¾ˆå¤šå…·ä½“å»ºé€ è€…ç±»æ¥å®ç°è¿™ç§å˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿå˜å¾—å¾ˆåºå¤§ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦è€ƒè™‘æ˜¯å¦é€‰æ‹©å»ºé€ è€…æ¨¡å¼.
7) > æŠ½è±¡å·¥å‚æ¨¡å¼ VS å»ºé€ è€…æ¨¡å¼

æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°å¯¹äº§å“å®¶æ—çš„åˆ›å»ºï¼Œä¸€ä¸ªäº§å“å®¶æ—æ˜¯è¿™æ ·çš„ä¸€ç³»åˆ—äº§å“ï¼šå…·æœ‰ä¸åŒåˆ†ç±»ç»´åº¦çš„äº§å“ç»„åˆï¼Œé‡‡ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸éœ€è¦å…³å¿ƒæ„å»ºè¿‡ç¨‹ï¼Œåªå…³å¿ƒä»€ä¹ˆäº§å“ç”±ä»€ä¹ˆå·¥å‚ç”Ÿäº§å³å¯ã€‚è€Œå»ºé€ è€…æ¨¡å¼åˆ™æ˜¯è¦æ±‚æŒ‰ç…§æŒ‡å®šçš„è“å›¾å»ºé€ äº§å“ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯é€šè¿‡ç»„è£…é›¶é…ä»¶è€Œäº§ç”Ÿä¸€ä¸ªæ–°äº§å“


<HR style="border:3 double #987cb9" width="100%" color=#84fa2a SIZE=3>



## 5 <text style="color:#15fa00">é€‚é…å™¨è®¾è®¡æ¨¡å¼</text>

> ç°å®ç”Ÿæ´»ä¸­çš„é€‚é…å™¨ä¾‹å­

æ³°å›½æ’åº§ç”¨çš„æ˜¯ä¸¤å­”çš„ï¼ˆæ¬§æ ‡ï¼‰ï¼Œå¯ä»¥ä¹°ä¸ªå¤šåŠŸèƒ½è½¬æ¢æ’å¤´ (é€‚é…å™¨) ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨äº†ã€‚


{% asset_img 2021-11-21-17-42-05.png %}
### 5.1 <text style="color:#8a7c74">åŸºæœ¬ä»‹ç»</text>

1)	é€‚é…å™¨æ¨¡å¼(``Adapter Pattern``)å°†æŸä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£è¡¨ç¤ºï¼Œä¸»çš„ç›®çš„æ˜¯å…¼å®¹æ€§ï¼Œè®©åŸæœ¬å› æ¥å£ä¸åŒ¹é…ä¸èƒ½ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªç±»å¯ä»¥ååŒå·¥ä½œã€‚å…¶åˆ«åä¸ºåŒ…è£…å™¨(``Wrapper``)
2)	é€‚é…å™¨æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼
3)	ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼šç±»é€‚é…å™¨æ¨¡å¼ã€å¯¹è±¡é€‚é…å™¨æ¨¡å¼ã€æ¥å£é€‚é…å™¨æ¨¡å¼

### 5.2 <text style="color:#524640">å·¥ä½œåŸç†</text>

1)	é€‚é…å™¨æ¨¡å¼ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå¦ä¸€ç§æ¥å£.è®©åŸæœ¬æ¥å£ä¸å…¼å®¹çš„ç±»å¯ä»¥å…¼å®¹
2)	ä»ç”¨æˆ·çš„è§’åº¦çœ‹ä¸åˆ°è¢«é€‚é…è€…ï¼Œæ˜¯è§£è€¦çš„
3)	ç”¨æˆ·è°ƒç”¨é€‚é…å™¨è½¬åŒ–å‡ºæ¥çš„ç›®æ ‡æ¥å£æ–¹æ³•ï¼Œé€‚é…å™¨å†è°ƒç”¨è¢«é€‚é…è€…çš„ç›¸å…³æ¥å£æ–¹æ³•
4)	ç”¨æˆ·æ”¶åˆ°åé¦ˆç»“æœï¼Œæ„Ÿè§‰åªæ˜¯å’Œç›®æ ‡æ¥å£äº¤äº’ï¼Œå¦‚å›¾

    {% asset_img 2021-11-21-17-42-14.png %}

### 5.3 <text style="color:#995f42">ç±»é€‚é…å™¨æ¨¡å¼</text>

#### 5.3.1 	ç±»é€‚é…å™¨æ¨¡å¼ä»‹ç»
> åŸºæœ¬ä»‹ç»

``Adapter`` ç±»ï¼Œé€šè¿‡ç»§æ‰¿ ``src`` ç±»ï¼Œå®ç° ``dst``  ç±»æ¥å£ï¼Œå®Œæˆ ``src->dst`` çš„é€‚é…ã€‚

#### 5.3.2 ç±»é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹

1. åº”ç”¨å®ä¾‹è¯´æ˜
ä»¥ç”Ÿæ´»ä¸­å……ç”µå™¨çš„ä¾‹å­æ¥è®²è§£é€‚é…å™¨ï¼Œå……ç”µå™¨æœ¬èº«ç›¸å½“äº ``Adapter``ï¼Œ``220V`` äº¤æµç”µç›¸å½“äº ``src`` (å³è¢«é€‚é…è€…)ï¼Œæˆ‘ä»¬çš„ç›® ``dst``(å³ ç›®æ ‡)æ˜¯ ``5V`` ç›´æµç”µ
2. æ€è·¯åˆ†æ(ç±»å›¾)
   
   {% asset_img 2021-11-21-17-42-26.png %} 
3. ä»£ç å®ç°

ç›®å½•ç»“æ„: 
{% asset_img 2021-11-21-17-42-37.png %}

```java
//é€‚é…æ¥å£
public interface IVoltage5V {
    public int output5V();
}
/***********************************************************/
//è¢«é€‚é…çš„ç±»
public class Voltage220V {
    //è¾“å‡º220Vçš„ç”µå‹
    public int output220V(){
        int src = 220;
        System.out.println("ç”µå‹=" + src + "ä¼");
        return src;
    }
}
/***********************************************************/
//ä½œç”¨ç±»
public class Phone {
    //å……ç”µ
    public void charging(IVoltage5V iVoltage5V) {
        if (iVoltage5V.output5V() == 5) {
            System.out.println("ç”µå‹ä¸º 5V, å¯ä»¥å……ç”µ~~");
        } else if (iVoltage5V.output5V() > 5) {
            System.out.println("ç”µå‹å¤§äº 5V, ä¸èƒ½å……ç”µ~~");
        }
    }
}
/***********************************************************/
//é€‚é…å™¨ç±»
public class VoltageAdapter extends Voltage220V implements IVoltage5V{
    @Override
    public int output5V() {
        //è·å–åˆ°220Vçš„ç”µå‹
        int srcV = output220V();
        int dstV = srcV / 44;
        return dstV;
    }

}
/***********************************************************/
public class Client {
    public static void main(String[] args) {
        System.out.println(" === ç±»é€‚é…å™¨æ¨¡å¼ ====");
        Phone phone = new Phone();
        phone.charging(new VoltageAdapter());
    }
}
```
ç»“æœ:

{% asset_img 2021-11-21-17-42-50.png %} 

#### 5.3.3 ç±»é€‚é…å™¨æ¨¡å¼æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚
1. ``Java`` æ˜¯å•ç»§æ‰¿æœºåˆ¶ï¼Œæ‰€ä»¥ç±»é€‚é…å™¨éœ€è¦ç»§æ‰¿ ``src`` ç±»è¿™ä¸€ç‚¹ç®—æ˜¯ä¸€ä¸ªç¼ºç‚¹, å› ä¸ºè¿™è¦æ±‚ ``dst`` å¿…é¡»æ˜¯æ¥å£ï¼Œæœ‰ä¸€å®šå±€é™æ€§;
2. ``src`` ç±»çš„æ–¹æ³•åœ¨ ``Adapter`` ä¸­éƒ½ä¼šæš´éœ²å‡ºæ¥ï¼Œä¹Ÿå¢åŠ äº†ä½¿ç”¨çš„æˆæœ¬ã€‚
3. ç”±äºå…¶ç»§æ‰¿äº† ``src`` ç±»ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ ¹æ®éœ€æ±‚é‡å†™ ``src`` ç±»çš„æ–¹æ³•ï¼Œä½¿å¾— ``Adapter`` çš„çµæ´»æ€§å¢å¼ºäº†ã€‚


<HR style="border:1 double #987cb9" width="100%" color=#768768 SIZE=2>

### 5.4 <text style="color:#702e0c">å¯¹è±¡é€‚é…å™¨æ¨¡å¼</text>

#### 5.4.1 å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä»‹ç»

1. åŸºæœ¬æ€è·¯å’Œç±»çš„é€‚é…å™¨æ¨¡å¼ç›¸åŒï¼Œåªæ˜¯å°† ``Adapter`` ç±»ä½œä¿®æ”¹ï¼Œä¸æ˜¯ç»§æ‰¿ ``src`` ç±»ï¼Œè€Œæ˜¯æŒæœ‰ ``src`` ç±»çš„å®ä¾‹ï¼Œä»¥è§£å†³å…¼å®¹æ€§çš„é—®é¢˜ã€‚ å³ï¼šæŒæœ‰ ``src`` ç±»ï¼Œå®ç° dst  ç±»æ¥å£ï¼Œå®Œæˆ ``src->dst`` çš„é€‚é…
2. æ ¹æ®â€œåˆæˆå¤ç”¨åŸåˆ™â€ï¼Œåœ¨ç³»ç»Ÿä¸­å°½é‡ä½¿ç”¨å…³è”å…³ç³»ï¼ˆèšåˆï¼‰æ¥æ›¿ä»£ç»§æ‰¿å…³ç³»ã€‚
3. å¯¹è±¡é€‚é…å™¨æ¨¡å¼æ˜¯é€‚é…å™¨æ¨¡å¼å¸¸ç”¨çš„ä¸€ç§

#### 5.4.2 å¯¹è±¡é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹

1. åº”ç”¨å®ä¾‹è¯´æ˜
ä»¥ç”Ÿæ´»ä¸­å……ç”µå™¨çš„ä¾‹å­æ¥è®²è§£é€‚é…å™¨ï¼Œå……ç”µå™¨æœ¬èº«ç›¸å½“äº ``Adapterï¼Œ220V`` äº¤æµç”µç›¸å½“äº ``src`` (å³è¢«é€‚é…è€…)ï¼Œæˆ‘ä»¬çš„ç›® ``dst``(å³ç›®æ ‡)æ˜¯ ``5V`` ç›´æµç”µï¼Œä½¿ç”¨å¯¹è±¡é€‚é…å™¨æ¨¡å¼å®Œæˆã€‚
2.æ€è·¯åˆ†æ(ç±»å›¾)ï¼šåªéœ€ä¿®æ”¹é€‚é…å™¨å³å¯, å¦‚ä¸‹:

{% asset_img 2021-11-21-17-43-02.png %}  

3. ä»£ç å®ç°

å¯¹è±¡é€‚é…å™¨ä¸»è¦çš„ä¸åŒç‚¹åœ¨äºé€‚é…å™¨ç±»é‡‡ç”¨äº†ç±»çš„èšåˆä»¥åŠæ„é€ å™¨ä¼ å…¥çš„æ–¹å¼
```java
public class VoltageAdapter implements IVoltage5V {

    //å…³è”å…³ç³»-èšåˆ
    private Voltage220V voltage220V;

    //é€šè¿‡æ„é€ å™¨ï¼Œä¼ å…¥ä¸€ä¸ª Voltage220V å®ä¾‹
    public VoltageAdapter(Voltage220V voltage220V) {
        this.voltage220V = voltage220V;
    }

    @Override
    public int output() {
        int dst = 0;
        if (null != voltage220V) {
            int src = voltage220V.output220V();
            System.out.println("ä½¿ç”¨å¯¹è±¡é€‚é…å™¨ï¼Œè¿›è¡Œé€‚é…~~");
            dst = src / 44;
            System.out.println("é€‚é…å®Œæˆï¼Œè¾“å‡ºçš„ç”µå‹ä¸º=" + dst);
        }

        return dst;
    }
}
```
æ‰§è¡Œç»“æœ:

{% asset_img 2021-11-21-17-43-10.png %}  


#### 5.4.3 å¯¹è±¡é€‚é…å™¨æ¨¡å¼æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚

1. å¯¹è±¡é€‚é…å™¨å’Œç±»é€‚é…å™¨å…¶å®ç®—æ˜¯åŒä¸€ç§æ€æƒ³ï¼Œåªä¸è¿‡å®ç°æ–¹å¼ä¸åŒã€‚æ ¹æ®åˆæˆå¤ç”¨åŸåˆ™ï¼Œä½¿ç”¨ç»„åˆæ›¿ä»£ç»§æ‰¿ï¼Œ æ‰€ä»¥å®ƒè§£å†³äº†ç±»é€‚é…å™¨å¿…é¡»ç»§æ‰¿ ``src`` çš„å±€é™æ€§é—®é¢˜ï¼Œä¹Ÿä¸å†è¦æ±‚ ``dst``
å¿…é¡»æ˜¯æ¥å£ã€‚
2. ä½¿ç”¨æˆæœ¬æ›´ä½ï¼Œæ›´çµæ´»ã€‚


<HR style="border:1 double #987cb9" width="100%" color=#768768 SIZE=2>


### 5.5 <text style="color:#cecf99">æ¥å£é€‚é…å™¨æ¨¡å¼</text>

#### 5.5.1 æ¥å£é€‚é…å™¨æ¨¡å¼ä»‹ç»
1. ä¸€äº›ä¹¦ç±ç§°ä¸ºï¼šé€‚é…å™¨æ¨¡å¼``(Default Adapter Pattern)``æˆ–ç¼ºçœé€‚é…å™¨æ¨¡å¼ã€‚
2. æ ¸å¿ƒæ€è·¯ï¼šå½“ä¸éœ€è¦å…¨éƒ¨å®ç°æ¥å£æä¾›çš„æ–¹æ³•æ—¶ï¼Œå¯å…ˆè®¾è®¡ä¸€ä¸ªæŠ½è±¡ç±»å®ç°æ¥å£ï¼Œå¹¶ä¸ºè¯¥æ¥å£ä¸­æ¯ä¸ªæ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤å®ç°ï¼ˆç©ºæ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆè¯¥æŠ½è±¡ç±»çš„å­ç±»å¯æœ‰é€‰æ‹©åœ°è¦†ç›–çˆ¶ç±»çš„æŸäº›æ–¹æ³•æ¥å®ç°éœ€æ±‚
3. é€‚ç”¨äºä¸€ä¸ªæ¥å£ä¸æƒ³ä½¿ç”¨å…¶æ‰€æœ‰çš„æ–¹æ³•çš„æƒ…å†µã€‚

#### 5.5.2 æ¥å£é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹

{% asset_img 2021-11-21-17-43-17.png %}
ä»£ç å®ç°:

```java
public interface InterfaceAdapter {
    public void m1();
    public void m2();
    public void m3();
    public void m4();
    public void m5();
}
/***********************************************************/
public class AbsAdapter implements InterfaceAdapter{
    /**
     * é»˜è®¤å®ç°
     */
    @Override
    public void m1() {

    }

    @Override
    public void m2() {

    }

    @Override
    public void m3() {

    }

    @Override
    public void m4() {

    }

    @Override
    public void m5() {

    }
}
/***********************************************************/
public class Client {
    public static void main(String[] args) {
        //åªéœ€è¦å»è¦†ç›–æˆ‘ä»¬ éœ€è¦ä½¿ç”¨ æ¥å£æ–¹æ³•
        AbsAdapter adapter = new AbsAdapter() {
            @Override
            public void m1() {
                System.out.println("ä½¿ç”¨äº†m1çš„æ–¹æ³•");
            }
        };
        adapter.m1();
    }
}
```
æ‰§è¡Œç»“æœ:

{% asset_img 2021-11-21-17-43-26.png %} 


<HR style="border:3 double #987cb9" width="100%" color=#84fa2a SIZE=3>


## 6 <text style="color:#15fa00">æ¡¥æ¥æ¨¡å¼</text>






